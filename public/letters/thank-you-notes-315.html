<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="thank you notes 3/15">
  <title>thank you notes 3/15 - Thank You Notes</title>
  <link rel="manifest" href="/letters/manifest.json">
  <meta name="theme-color" content="#007bff">
  <link rel="apple-touch-icon" href="/letters/icon-192.png">
  <style>
    /**
 * Shared Styles for Thank You Notes
 * Used by both the static site and PWA version
 */

/* Base Reset and Layout */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: #f5f5f5;
  color: #333;
  line-height: 1.6;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

/* Loading and Error States */
.loading,
.error {
  text-align: center;
  padding: 3rem;
  font-size: 1.2rem;
}

.error {
  color: #dc3545;
}

/* Header */
.header {
  margin-bottom: 1.5rem;
  text-align: center;
}

.header h1 {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
}

.subtitle {
  font-size: 1rem;
  color: #666;
}

/* Controls */
.controls {
  margin-bottom: 2rem;
}

.search-container {
  position: relative;
  margin-bottom: 1rem;
}

.search-input {
  width: 100%;
  padding: 0.75rem 2.5rem 0.75rem 1rem;
  font-size: 1rem;
  border: 2px solid #dee2e6;
  border-radius: 8px;
  outline: none;
  transition: border-color 0.2s;
  background: white;
}

.search-input:focus {
  border-color: #007bff;
}

.clear-search {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 1.25rem;
  color: #6c757d;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  line-height: 1;
  transition: color 0.2s;
}

.clear-search:hover {
  color: #333;
}

.control-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.sort-container {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.sort-container label {
  font-size: 0.875rem;
  font-weight: 500;
  color: #666;
}

.sort-select {
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  border: 2px solid #dee2e6;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  outline: none;
  transition: border-color 0.2s;
}

.sort-select:focus {
  border-color: #007bff;
}

.result-count {
  font-size: 0.875rem;
  font-weight: 600;
  color: #495057;
  padding: 0.5rem 0.75rem;
  background: #e9ecef;
  border-radius: 6px;
  white-space: nowrap;
}

.btn-random {
  background: #28a745;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-random:hover {
  background: #218838;
  transform: translateY(-1px);
}

.btn-random:active {
  transform: translateY(0);
}

.searching,
.no-results {
  text-align: center;
  padding: 3rem 1rem;
  font-size: 1.1rem;
  color: #666;
}

/* Email/Letter List */
.list,
.letter-list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.email-card,
.letter-card {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  text-decoration: none;
  color: inherit;
  display: block;
}

.email-card:hover,
.letter-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.email-card-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: #e9ecef;
}

.email-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.email-card-content,
.letter-card {
  padding: 1.5rem;
}

.email-card h2,
.letter-card h2 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  font-weight: 600;
}

.email-description,
.letter-card p {
  color: #666;
  margin-bottom: 0.75rem;
  line-height: 1.5;
}

.email-search-snippet {
  color: #555;
  margin-bottom: 0.75rem;
  line-height: 1.5;
  font-style: italic;
}

.search-highlight {
  background: #fff3cd;
  color: #856404;
  font-weight: 700;
  padding: 0.1rem 0.2rem;
  border-radius: 3px;
  font-style: normal;
}

.email-date,
.letter-card time {
  display: block;
  font-size: 0.875rem;
  color: #888;
}

/* Email/Letter Reader */
.email-reader,
.letter-content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  margin-bottom: 2rem;
}

.email-reader {
  touch-action: pan-y pinch-zoom;
}

.reader-nav,
.navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background: #f8f9fa;
  border-bottom: 1px solid #dee2e6;
  gap: 1rem;
  flex-wrap: wrap;
}

.reader-nav-bottom {
  border-top: 1px solid #dee2e6;
  border-bottom: none;
}

.nav-buttons,
.nav-links {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

/* Buttons */
.btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  text-decoration: none;
  display: inline-block;
}

.btn:hover {
  transform: translateY(-1px);
}

.btn:active {
  transform: translateY(0);
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #5a6268;
}

.btn-nav {
  background: #007bff;
  color: white;
}

.btn-nav:hover {
  background: #0056b3;
}

.btn-back-arrow {
  background: none;
  border: none;
  color: #333;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  transition: color 0.2s, transform 0.1s;
  line-height: 1;
}

.btn-back-arrow:hover {
  color: #007bff;
  transform: translateX(-2px);
}

.btn-back-arrow:active {
  transform: translateX(0);
}

/* Email/Letter Content */
.email-content,
.letter-content {
  padding: 2rem 1.5rem;
}

.email-header,
.letter-header {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px solid #e9ecef;
}

.email-header h1,
.letter-header h1 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-header .email-date,
.letter-header time {
  font-size: 1rem;
  color: #666;
}

/* Email/Letter Body Styles */
.email-body,
.letter-body {
  font-size: 1.0625rem;
  line-height: 1.7;
  color: #333;
}

.email-body h1,
.email-body h2,
.email-body h3,
.email-body h4,
.email-body h5,
.email-body h6,
.letter-body h1,
.letter-body h2,
.letter-body h3,
.letter-body h4,
.letter-body h5,
.letter-body h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-body h1,
.letter-body h1 {
  font-size: 1.875rem;
}

.email-body h2,
.letter-body h2 {
  font-size: 1.5rem;
}

.email-body h3,
.letter-body h3 {
  font-size: 1.25rem;
}

.email-body p,
.letter-body p {
  margin-bottom: 1rem;
}

.email-body a,
.letter-body a {
  color: #007bff;
  text-decoration: none;
}

.email-body a:hover,
.letter-body a:hover {
  text-decoration: underline;
}

.email-body img,
.letter-body img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  margin: 1.5rem 0;
}

.email-body ul,
.email-body ol,
.letter-body ul,
.letter-body ol {
  margin-bottom: 1rem;
  padding-left: 2rem;
}

.email-body li,
.letter-body li {
  margin-bottom: 0.5rem;
}

.email-body blockquote,
.letter-body blockquote {
  margin: 1.5rem 0;
  padding-left: 1rem;
  border-left: 4px solid #e9ecef;
  color: #666;
  font-style: italic;
}

.email-body code,
.letter-body code {
  background: #f8f9fa;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

.email-body pre,
.letter-body pre {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 1.5rem 0;
}

.email-body pre code,
.letter-body pre code {
  background: none;
  padding: 0;
}

.email-body hr,
.letter-body hr {
  border: none;
  border-top: 2px solid #e9ecef;
  margin: 2rem 0;
}

/* PWA Banner */
.pwa-banner {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1rem;
  border-radius: 8px;
  margin: 1rem 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.pwa-banner-text {
  flex: 1;
  min-width: 200px;
}

.pwa-banner-text h3 {
  margin-bottom: 0.25rem;
  font-size: 1.1rem;
}

.pwa-banner-text p {
  font-size: 0.9rem;
  opacity: 0.9;
}

.btn-primary {
  background: #007bff;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-primary:hover {
  background: #0056b3;
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0);
}

.btn-primary:disabled {
  background: #6c757d;
  cursor: not-allowed;
  transform: none;
}

.btn-danger {
  background: #dc3545;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-danger:hover {
  background: #c82333;
  transform: translateY(-1px);
}

.btn-danger:active {
  transform: translateY(0);
}

/* Offline & PWA UI */
.offline-banner {
  background: #ff9800;
  color: white;
  padding: 0.75rem 1rem;
  text-align: center;
  border-radius: 8px;
  margin-bottom: 1rem;
  font-weight: 500;
}

.download-progress {
  background: white;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.download-progress-bar {
  height: 8px;
  background: #e9ecef;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.download-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #007bff, #0056b3);
  transition: width 0.3s ease;
}

.download-progress p {
  font-size: 0.875rem;
  color: #666;
  text-align: center;
  margin: 0;
}

.btn-offline {
  background: #6c757d;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-offline:hover {
  background: #5a6268;
  transform: translateY(-1px);
}

.btn-offline:active {
  transform: translateY(0);
}

.offline-panel {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.offline-panel h3 {
  margin-bottom: 1rem;
  color: #1a1a1a;
  font-size: 1.25rem;
}

.offline-stats {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1rem;
}

.offline-stats p {
  margin: 0.5rem 0;
  color: #495057;
  font-size: 0.9375rem;
}

.offline-actions {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.offline-note {
  font-size: 0.875rem;
  color: #666;
  line-height: 1.5;
  margin: 0;
  font-style: italic;
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 1rem 0.5rem;
  }

  .header h1 {
    font-size: 2rem;
  }

  .control-row {
    flex-direction: column;
    align-items: stretch;
  }

  .sort-container {
    width: 100%;
    justify-content: space-between;
  }

  .sort-select {
    flex: 1;
  }

  .result-count {
    text-align: center;
  }

  .btn-random {
    width: 100%;
  }

  .email-card-content {
    padding: 1rem;
  }

  .email-card h2 {
    font-size: 1.25rem;
  }

  .email-content,
  .letter-content {
    padding: 1.5rem 1rem;
  }

  .email-header h1,
  .letter-header h1 {
    font-size: 1.5rem;
  }

  .reader-nav,
  .navigation {
    flex-direction: column;
    align-items: stretch;
  }

  .nav-buttons,
  .nav-links {
    flex-direction: column;
  }

  .btn {
    width: 100%;
    text-align: center;
  }

  .btn-nav {
    font-size: 0.8125rem;
    white-space: normal;
    word-wrap: break-word;
  }

  body {
    padding: 10px;
  }

  .pwa-banner {
    flex-direction: column;
    text-align: center;
  }
}

@media (max-width: 480px) {
  .email-card-image {
    height: 150px;
  }

  .email-body,
  .letter-body {
    font-size: 1rem;
  }
}


    
    /* Static site specific adjustments */
    body {
      padding: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <div class="pwa-banner" style="display: none;">
      <div class="pwa-banner-text">
        <h3>📱 Read Offline</h3>
        <p>Install the app to read all letters offline</p>
      </div>
      <div>
        <button class="btn btn-primary" onclick="installPWA()">Install App</button>
      </div>
    </div>

    <article class="letter-content">
      <header class="letter-header">
        <h1>thank you notes 3/15</h1>
        <time datetime="2016-03-15T00:00:00Z">March 14, 2016</time>
      </header>

      <div class="letter-body">
        <p>i&#39;m thankful that i put off taking out the trash last night because i didn&#39;t want to have to interact with our next door neighbor, who was taking advantage of it being light later by tending his backyard garden after work. i&#39;m thankful that i knew it would be perfectly fine if i interacted with him, since he is a nice and friendly and undemanding person, but thankful also that i didn&#39;t have to if i didn&#39;t feel like it and that i don&#39;t have to make myself feel bad about that preference. </p>
<p>i&#39;m thankful for how on saturday morning when i was watching dishes, i watched through the window as he came out into the back yard to smoke a morning cigarette. i&#39;m thankful for how, while smoking his cigarette and looking out at the garden he&#39;s building, i assume imagining what he was going to do to it that day and what it might look like at the end of the day, he drank a large glass of orange juice. i&#39;m thankful something about that combination (bright acidity of orange juice vs. dull smokiness of cigarette) seemed to be intriguing/funny to me. i&#39;m thankful it reminded me of one of my best friends from college, z, who during our freshman year liked to play the rufus wainwright song &quot;<a href="https://www.youtube.com/watch?v=d5CLmflrwIA">cigarettes and chocolate milk</a>&quot; on repeat while smoking cigarettes (i&#39;m thankful to remember that benson &amp; hedges was his brand) and drinking chocolate milk. </p>
<p>i&#39;m thankful that on saturday morning, a little while after i watched with fondness our neighbor with his cigarette and orange juice, i came back through the kitchen and looked out at the yard and saw that he had paused from laying a stone border around the dirt plot of the garden to talk happily with the weird guy who lives in the house behind my neighbor and who always walks around with a large green tropical bird on his shoulder. i&#39;m thankful how happy it made me on that saturday morning (i&#39;m thankful that saturday mornings are the happiest time of the week for me, the time that feels most filled with the possibility for joy) to see that the weird guy who always walks around with a large green tropical bird on his shoulder was standing next to a small woman who was wearing a large blue tropical bird on her shoulder. i&#39;m thankful that they were all having a nice saturday morning conversation. i&#39;m thankful to hope that everyone weird (which is everyone, in some way) can eventually find a person to be weird with them if that&#39;s what they want.</p>
<p>i&#39;m thankful that when our neighbor went in for dinner last night, which was hours after we ate dinner (homemade burritos), i finally went to take out the trash. i&#39;m thankful that before i went out, i remembered to grab one of the yellow tax stickers to affix to the handle of the trashcan and also a bag of leftover okra which had gone soggy and rotten in the crisper and i had noticed while we were making dinner. i&#39;m thankful that we have a mud room off the kitchen where we can keep our shoes and our bikes and try to keep from tracking dirt and mud into the house, which i like to keep as clean as i can. i&#39;m thankful for the wood paneled walls of the mudroom because i think wood paneling is funny for some reason. i&#39;m thankful for the way the door to the backyard from the mudroom always sticks a little, which i sometimes find annoying and sometimes find endearing, an example of the house&#39;s personality. </p>
<p>i&#39;m thankful that though the ground was wet and muddy from the day&#39;s rain, our yard has a stone path i could carry the trashcan along it and up the stairs to the driveway without mucking up my shoes. i&#39;m thankful that the garbage can was almost too overstuffed for the lid to fit but that i was able to mostly smush down the garbage inside to get it on there. i&#39;m thankful that, pleased with this fit, i started to pull the garbage can down our gravel drive way and one of its plastic wheels caught awkwardly somewhere and tipped over a bit, knocking off the loose lid and spilling some garbage onto the ground, including the bag of slimy okra and the wet peel of the avocado from the guacamole i&#39;d made for our burritos and the skins of some onions and paper towels soaked with all of the above and more gross garbage liquid. </p>
<p>i&#39;m thankful that i reacted quickly and shifted my weight and caught the trashcan before it fell over completely and dumped much more trash into the gravel. i&#39;m thankful that even though it was gross, i picked up the trash that had fallen and shoved it into the bag on top, which i had not tied securely enough because i was rushing and lazy (i&#39;m thankful for a reminder of the importance of tying garbage bags securely), and tied it securely. i&#39;m thankful that because i was holding the yellow tax sticker in my right hand when i started picking up the garbage, i got it garbagey and bent but not so garbagey that it wasn&#39;t usable. i&#39;m thankful i took a breath and shoved it in my pocket and put the lid back on the garbage can and started down the driveway.</p>
<p>i&#39;m thankful that, as i walked the trashcan down the driveway, trailing its weight behind me, i noticed the way the evening sky looked in the east. i&#39;m thankful there were a misty shelf of clouds in the distance and they were dark grey clouds but also light was diffusing through them (infusing them, it felt like) in a way that made them more of a slightly smoky red color that seemed beautiful in a gerhard richter kind of postmodern decay way, especially with them framed against the slate gray sky around them and the faint lights of downtown below. </p>
<p>i&#39;m thankful that i paused to recognize their beauty and to recognize that i wouldn&#39;t have noticed it if i hadn&#39;t come outside to take out the garbage, which was something i didn&#39;t want to do and had put off not only because our neighbor was outside, but also because i just didn&#39;t want to do it. i&#39;m thankful that i briefly fantasized about being a painter, even though i&#39;m not good at painting, so that i could capture the tonalities and textures of the sky in its current configuration. i&#39;m thankful that sometimes i take pictures of the sky with my phone when it seems particularly beautiful, but the pictures never really capture what i&#39;m seeing or feeling, never seem close or big or rich enough, which is why i fantasize about being a painter, to be able to make pictures of skies with feelings the way that turner or monet or van gogh do.</p>
<p>i&#39;m thankful that when i got the trashcan down to the curb, i reached in my pocket to get the yellow tax sticker to stick around the handle of the trashcan and it wasn&#39;t there anymore. i&#39;m thankful that i quickly reached into all of my pockets several times to try to find the yellow tax sticker and it wasn&#39;t there anymore. i&#39;m thankful that i figured it must have fallen out of my small pockets at some point along the driveway, so i walked back up watching the ground until i got to where i had spilled the trash. </p>
<p>i&#39;m thankful that no matter where i looked, i could not find the yellow tax sticker, even though i was not thankful for this at the time. </p>
<p>i&#39;m thankful that i thought about it and realized, in between a) realizing the sticker was in my hand while i was picking up the trash and that i was getting trash on it, as i described earlier, and b) finishing putting the trash back and putting the lid back on the trashcan, that i must have put the yellow tax sticker in the trash. i&#39;m thankful that i stood there at the top of the driveway looking angrily down at the gravel and pondered whether the trash sticker, which cost $2, was worth sticking my hand in the trash again to retrieve the yellow tax sticker, how i weighed the indignity of it against the fact that $2 was still money and that i had already soiled my hands with trash anyway, that they wouldn&#39;t be getting &quot;dirtier&quot; anyway. </p>
<p>i&#39;m thankful, after pausing to consider this, for the privilege to decide that i did not want to dig through the trash for the yellow tax sticker, not because of the grossness of digging through the trash but mostly because of the prospect that maybe i had somehow lost it somewhere else and that i would go down the driveway to the curb and dig through the trash only to find that it wasn&#39;t there and i would have to go back up and into the house anyway to get another yellow tax sticker, which seemed at that moment like the worst thing that could possibly happen in the world.</p>
<p>i&#39;m thankful when i went through the back door, i took off my shoes in the mud room so i didn&#39;t track wet dirt into the house, even though i really wanted this job to be over already and having to take off my shoes and put them back on again after getting another yellow tax sticker off the fridge made it longer. i&#39;m thankful that nike frees, which are the only shoes i wear except for formal occasions, are soft and easy to work your foot into without having to lace and unlace, which at least &quot;saved&quot; me a little time.</p>
<p>i&#39;m thankful that as i went down the driveway again to put the yellow tax sticker on the trashcan, i looked up again at the ashy red clouds. i&#39;m thankful that near the top of the driveway, i was still annoyed enough about losing the trash sticker that they didn&#39;t impress me as much, but by the time i got down to the curb, i was happy to be there at the trash can and threading the yellow tax sticker through the handle and peeling off the little square covering the adhesive and closing the loop, thankful for the way that closing the loop gave a feeling of conclusion to the whole tiny silent ordeal i had endured. i&#39;m thankful that i looked over my shoulder from the curb at the ashy red clouds one more time, trying to capture them in my mind, then set off up the driveway</p>
<p>i&#39;m thankful that when i looked up the over the hill of the driveway and above the trees in our backyard and the houses of our neighbors, i saw, in what looked like a ragged hole torn out of the gray paper of the clouds, a small circle-ish space of pure blue sky filled with a few fluffy white platonic ideal clouds. i&#39;m thankful that i thought of byzantine icons (because of the shape of the hole and the jewel-like nature of what it contained) and of the ceiling of the sistine chapel, the image of god living life to adam (i&#39;m thankful that even though i just looked it up and there aren&#39;t fluffy clouds and blue skies there like there are in my memory, the connection my brain made then still reflects what felt holy about the moment). i&#39;m thankful for the moment i had standing there and looking up into the blue musing on the strangeness that the sky to the west could look a certain way, but that if i turned around, the sky to the east could feel like it belonged to an entirely different world</p>
<p>i&#39;m thankful that when i got inside and peeled off my jeans, the yellow tax sticker i thought i&#39;d lost fluttered out of my pocket onto the floor.</p>

      </div>
    </article>

    <nav class="navigation">
      <a href="/letters/" class="btn btn-secondary">home</a>
      <div class="nav-links">
        <a href="/letters/letters/thank-you-notes-julia-weston.html" class="btn btn-secondary">← thank you notes (julia weston)</a>
        <a href="/letters/letters/thank-you-notes-314.html" class="btn btn-secondary">thank you notes 3/14 →</a>
      </div>
    </nav>
  
  </div>

  <script>
    // PWA installation prompt
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'flex';
      }
    });

    async function installPWA() {
      if (!deferredPrompt) {
        // If not installable, redirect to PWA
        window.location.href = '/letters/app/';
        return;
      }

      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      
      if (outcome === 'accepted') {
        console.log('PWA installed');
      }
      
      deferredPrompt = null;
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'none';
      }
    }

    function openPWA() {
      window.location.href = '/letters/app/';
    }

    // Progressive Enhancement: Check if user has PWA installed
    // If they do, redirect them to the app version for a richer experience
    if (window.matchMedia('(display-mode: standalone)').matches) {
      // User is in standalone mode (PWA is installed and running)
      // Keep them on static page - they're already in PWA mode
      console.log('Running in PWA mode');
    } else {
      // Check if user has previously used the PWA (has cached data)
      if ('caches' in window) {
        caches.keys().then(cacheNames => {
          const hasPWACache = cacheNames.some(name => 
            name.includes('static-') || name.includes('data-')
          );
          
          // Only show PWA banner if they have cached content
          if (hasPWACache) {
            const banner = document.querySelector('.pwa-banner');
            if (banner && banner.style.display === 'none') {
              banner.style.display = 'flex';
            }
          }
        });
      }
    }

    // Register service worker for all pages
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('/letters/sw.js', { scope: '/letters/' })
          .then((registration) => {
            console.log('SW registered:', registration);
          })
          .catch((error) => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>