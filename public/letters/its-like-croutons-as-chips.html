<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="it&#039;s like croutons as chips">
  <title>it&#039;s like croutons as chips - Thank You Notes</title>
  <link rel="manifest" href="/letters/manifest.json">
  <meta name="theme-color" content="#007bff">
  <link rel="apple-touch-icon" href="/letters/icon-192.png">
  <style>
    /**
 * Shared Styles for Thank You Notes
 * Used by both the static site and PWA version
 */

/* Base Reset and Layout */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: #f5f5f5;
  color: #333;
  line-height: 1.6;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

/* Loading and Error States */
.loading,
.error {
  text-align: center;
  padding: 3rem;
  font-size: 1.2rem;
}

.error {
  color: #dc3545;
}

/* Header */
.header {
  margin-bottom: 1.5rem;
  text-align: center;
}

.header h1 {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
}

.subtitle {
  font-size: 1rem;
  color: #666;
}

/* Controls */
.controls {
  margin-bottom: 2rem;
}

.search-container {
  position: relative;
  margin-bottom: 1rem;
}

.search-input {
  width: 100%;
  padding: 0.75rem 2.5rem 0.75rem 1rem;
  font-size: 1rem;
  border: 2px solid #dee2e6;
  border-radius: 8px;
  outline: none;
  transition: border-color 0.2s;
  background: white;
}

.search-input:focus {
  border-color: #007bff;
}

.clear-search {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 1.25rem;
  color: #6c757d;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  line-height: 1;
  transition: color 0.2s;
}

.clear-search:hover {
  color: #333;
}

.control-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.sort-container {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.sort-container label {
  font-size: 0.875rem;
  font-weight: 500;
  color: #666;
}

.sort-select {
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  border: 2px solid #dee2e6;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  outline: none;
  transition: border-color 0.2s;
}

.sort-select:focus {
  border-color: #007bff;
}

.result-count {
  font-size: 0.875rem;
  font-weight: 600;
  color: #495057;
  padding: 0.5rem 0.75rem;
  background: #e9ecef;
  border-radius: 6px;
  white-space: nowrap;
}

.btn-random {
  background: #28a745;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-random:hover {
  background: #218838;
  transform: translateY(-1px);
}

.btn-random:active {
  transform: translateY(0);
}

.searching,
.no-results {
  text-align: center;
  padding: 3rem 1rem;
  font-size: 1.1rem;
  color: #666;
}

/* Email/Letter List */
.list,
.letter-list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.email-card,
.letter-card {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  text-decoration: none;
  color: inherit;
  display: block;
}

.email-card:hover,
.letter-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.email-card-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: #e9ecef;
}

.email-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.email-card-content,
.letter-card {
  padding: 1.5rem;
}

.email-card h2,
.letter-card h2 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  font-weight: 600;
}

.email-description,
.letter-card p {
  color: #666;
  margin-bottom: 0.75rem;
  line-height: 1.5;
}

.email-search-snippet {
  color: #555;
  margin-bottom: 0.75rem;
  line-height: 1.5;
  font-style: italic;
}

.search-highlight {
  background: #fff3cd;
  color: #856404;
  font-weight: 700;
  padding: 0.1rem 0.2rem;
  border-radius: 3px;
  font-style: normal;
}

.email-date,
.letter-card time {
  display: block;
  font-size: 0.875rem;
  color: #888;
}

/* Email/Letter Reader */
.email-reader,
.letter-content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  margin-bottom: 2rem;
}

.email-reader {
  touch-action: pan-y pinch-zoom;
}

.reader-nav,
.navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background: #f8f9fa;
  border-bottom: 1px solid #dee2e6;
  gap: 1rem;
  flex-wrap: wrap;
}

.reader-nav-bottom {
  border-top: 1px solid #dee2e6;
  border-bottom: none;
}

.nav-buttons,
.nav-links {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

/* Buttons */
.btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  text-decoration: none;
  display: inline-block;
}

.btn:hover {
  transform: translateY(-1px);
}

.btn:active {
  transform: translateY(0);
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #5a6268;
}

.btn-nav {
  background: #007bff;
  color: white;
}

.btn-nav:hover {
  background: #0056b3;
}

.btn-back-arrow {
  background: none;
  border: none;
  color: #333;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  transition: color 0.2s, transform 0.1s;
  line-height: 1;
}

.btn-back-arrow:hover {
  color: #007bff;
  transform: translateX(-2px);
}

.btn-back-arrow:active {
  transform: translateX(0);
}

/* Email/Letter Content */
.email-content,
.letter-content {
  padding: 2rem 1.5rem;
}

.email-header,
.letter-header {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px solid #e9ecef;
}

.email-header h1,
.letter-header h1 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-header .email-date,
.letter-header time {
  font-size: 1rem;
  color: #666;
}

/* Email/Letter Body Styles */
.email-body,
.letter-body {
  font-size: 1.0625rem;
  line-height: 1.7;
  color: #333;
}

.email-body h1,
.email-body h2,
.email-body h3,
.email-body h4,
.email-body h5,
.email-body h6,
.letter-body h1,
.letter-body h2,
.letter-body h3,
.letter-body h4,
.letter-body h5,
.letter-body h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-body h1,
.letter-body h1 {
  font-size: 1.875rem;
}

.email-body h2,
.letter-body h2 {
  font-size: 1.5rem;
}

.email-body h3,
.letter-body h3 {
  font-size: 1.25rem;
}

.email-body p,
.letter-body p {
  margin-bottom: 1rem;
}

.email-body a,
.letter-body a {
  color: #007bff;
  text-decoration: none;
}

.email-body a:hover,
.letter-body a:hover {
  text-decoration: underline;
}

.email-body img,
.letter-body img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  margin: 1.5rem 0;
}

.email-body ul,
.email-body ol,
.letter-body ul,
.letter-body ol {
  margin-bottom: 1rem;
  padding-left: 2rem;
}

.email-body li,
.letter-body li {
  margin-bottom: 0.5rem;
}

.email-body blockquote,
.letter-body blockquote {
  margin: 1.5rem 0;
  padding-left: 1rem;
  border-left: 4px solid #e9ecef;
  color: #666;
  font-style: italic;
}

.email-body code,
.letter-body code {
  background: #f8f9fa;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

.email-body pre,
.letter-body pre {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 1.5rem 0;
}

.email-body pre code,
.letter-body pre code {
  background: none;
  padding: 0;
}

.email-body hr,
.letter-body hr {
  border: none;
  border-top: 2px solid #e9ecef;
  margin: 2rem 0;
}

/* PWA Banner */
.pwa-banner {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1rem;
  border-radius: 8px;
  margin: 1rem 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.pwa-banner-text {
  flex: 1;
  min-width: 200px;
}

.pwa-banner-text h3 {
  margin-bottom: 0.25rem;
  font-size: 1.1rem;
}

.pwa-banner-text p {
  font-size: 0.9rem;
  opacity: 0.9;
}

.btn-primary {
  background: #007bff;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-primary:hover {
  background: #0056b3;
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0);
}

.btn-primary:disabled {
  background: #6c757d;
  cursor: not-allowed;
  transform: none;
}

.btn-danger {
  background: #dc3545;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-danger:hover {
  background: #c82333;
  transform: translateY(-1px);
}

.btn-danger:active {
  transform: translateY(0);
}

/* Offline & PWA UI */
.offline-banner {
  background: #ff9800;
  color: white;
  padding: 0.75rem 1rem;
  text-align: center;
  border-radius: 8px;
  margin-bottom: 1rem;
  font-weight: 500;
}

.download-progress {
  background: white;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.download-progress-bar {
  height: 8px;
  background: #e9ecef;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.download-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #007bff, #0056b3);
  transition: width 0.3s ease;
}

.download-progress p {
  font-size: 0.875rem;
  color: #666;
  text-align: center;
  margin: 0;
}

.btn-offline {
  background: #6c757d;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-offline:hover {
  background: #5a6268;
  transform: translateY(-1px);
}

.btn-offline:active {
  transform: translateY(0);
}

.offline-panel {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.offline-panel h3 {
  margin-bottom: 1rem;
  color: #1a1a1a;
  font-size: 1.25rem;
}

.offline-stats {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1rem;
}

.offline-stats p {
  margin: 0.5rem 0;
  color: #495057;
  font-size: 0.9375rem;
}

.offline-actions {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.offline-note {
  font-size: 0.875rem;
  color: #666;
  line-height: 1.5;
  margin: 0;
  font-style: italic;
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 1rem 0.5rem;
  }

  .header h1 {
    font-size: 2rem;
  }

  .control-row {
    flex-direction: column;
    align-items: stretch;
  }

  .sort-container {
    width: 100%;
    justify-content: space-between;
  }

  .sort-select {
    flex: 1;
  }

  .result-count {
    text-align: center;
  }

  .btn-random {
    width: 100%;
  }

  .email-card-content {
    padding: 1rem;
  }

  .email-card h2 {
    font-size: 1.25rem;
  }

  .email-content,
  .letter-content {
    padding: 1.5rem 1rem;
  }

  .email-header h1,
  .letter-header h1 {
    font-size: 1.5rem;
  }

  .reader-nav,
  .navigation {
    flex-direction: column;
    align-items: stretch;
  }

  .nav-buttons,
  .nav-links {
    flex-direction: column;
  }

  .btn {
    width: 100%;
    text-align: center;
  }

  .btn-nav {
    font-size: 0.8125rem;
    white-space: normal;
    word-wrap: break-word;
  }

  body {
    padding: 10px;
  }

  .pwa-banner {
    flex-direction: column;
    text-align: center;
  }
}

@media (max-width: 480px) {
  .email-card-image {
    height: 150px;
  }

  .email-body,
  .letter-body {
    font-size: 1rem;
  }
}


    
    /* Static site specific adjustments */
    body {
      padding: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <div class="pwa-banner" style="display: none;">
      <div class="pwa-banner-text">
        <h3>üì± Read Offline</h3>
        <p>Install the app to read all letters offline</p>
      </div>
      <div>
        <button class="btn btn-primary" onclick="installPWA()">Install App</button>
      </div>
    </div>

    <article class="letter-content">
      <header class="letter-header">
        <h1>it&#039;s like croutons as chips</h1>
        <time datetime="2024-07-10T15:49:42.916793Z">July 10, 2024</time>
      </header>

      <div class="letter-body">
        <p><img src="/letters/images/204.jpg" alt="image.png"> </p>
<p>it has been too hot to make art (a convenient excuse), but the worst of it has broken and the heat advisory has been lifted. another summer of keeping the grass in the backyard alive and letting the grass in the front die (mullet lawn care). the sensation of moving from extreme heat into air conditioning. i was on dinner duty the last two nights and in both cases because of the heat i started the process of cooking just in [charli xcx voice] &quot;my un-der-wear&quot; but then as bacon fat popped in the cast iron skillet my mind went &quot;really really put on an apron it&#39;s not too late to avert a disaster if you do it right this minute&quot; and i did and i do not have any grease burns on my nips god bless.</p>
<p> <img src="/letters/images/207.jpg" alt="image.png"> </p>
<p>the smell of freshly ground weed which i sometimes just huff from the container as kind of aromatherapy. snacks always but most recently limited edition golden pineapple ice breakers (i made everyone wait in the car so i could go back through the line at the grocery store to buy a pac after t noticed them on the way out; the sours are still the GOAT but these are a welcome addition); caramel bugles (joe scoffed, but jon was right‚Äîreally more-ish sweat/savory blend that like the best and most diabolical snacks builds in effect as you eat more of the bag); harvest snacks sour cream and onion lentil crisps (surprisingly strongly seasoned); ritz bitz sandwiches with cheese (i hadn&#39;t had/thought of these in years but deborah bought a box and we share a single server bag of them every afternoon); pita chips, which as a person who (maybe my most controversial Things Reasonable People Love That I Hate yet?!) doesn&#39;t really like hummus (it gets into the mushy savory problem deborah previously identified!), i have previously discarded as the solution to a problem that i don&#39;t have, but then we discovered they go so well as the side to a big salad (deborah: &quot;it&#39;s like croutons as chips&quot;)</p>
<p> <img src="/letters/images/205.jpg" alt="image.png"> </p>
<p>there is suddenly a daiso across the border in vancouver now, fulfilling a dream deborah never expected to be fulfilled and my favorite thing i have bought there is something stupid i&#39;ve always wanted which is one of those little machines for resealing snack bags with heat (here is <a href="https://www.amazon.com/Rechargeable-Portable-Resealer-Plastic-Storage/dp/B0CZ7ZVXYB/ref=sr_1_1_sspa?crid=7IYC6UOS8PHJ&dib=eyJ2IjoiMSJ9.9RDAv5om53PuKXkIF8fNp17yJSEGsGHOlbbGfR3wCObl2fVEjneAyxP46IQjnpq3iO8OYS8rRejZPmszcakqIF7fwuqWQGAxS678Raz94g7JztRDICm-Pt4nMKenPCynkKJQxOVQq_VX5MEdNuikbib1AkuHsW9lMX3Wte7VliCY8WMllVMIZpXt32IGOel9vEeJmA1emt2b-AX3_dP6XkbCNdHx3gIWC6j9bct1QHXn2AOCeeEDGqQ3vjwdoyJNNZo0ed-3x3N5Lq1l5z5m6QddSv6kONhBBFr5cImCvFg.MRhkf4tXbisek5PHflVdTaWL23BMjUxfov4YcivQrqE&dib_tag=se&keywords=bag+heat+sealer+handheld&qid=1720621856&sprefix=bag+heat+sealer+handheld%2Caps%2C234&sr=8-1-spons&sp_csd=d2lkZ2V0TmFtZT1zcF9hdGY&psc=1">a similar one from amazon</a>), which on balance does not really save time or energy but is so much more <em>fun</em> than applying a chip clip or twist tie (also would be great for stealth edibles, which makes me think of a tiktok i saw of someone at an outdoor festival unwrapping a foil wrapped sandwich to reveal that inside the bread is just a bunch of joints snuck into the venue). deborah let me borrow her neck fan, which i had made fun of on vacation but which allowed me to finish the day&#39;s work in my non-air conditioned office without dissolving into a puddle). homemade frozen cocktails she made with the immersion blender and fresh peaches.</p>
<p> <img src="/letters/images/206.jpg" alt="image.png"> </p>
<p><em>challengers</em> finally came to VOD for $4.99 so we finally watched it and i love zendaya and it was a way to pass the time in the heat but gotta say pretty underwhelming (i tend to discount movie/tv reviews from my parents after being burned before but have to admit they were right on this one being boring). from the discourse on release, i thought it was going to be some kind of fucked-up erotic thriller/dark comedy thing in the vein of my favorite 2023 movie Saltburn, but that&#39;s idk 7% of it and most of it is like just about...tennis?! which for me doesn&#39;t even rise to the level of Things Reasonable People Love That I Hate because [eternal don draper voice] &quot;i don&#39;t think of it at all&quot; (and in fact at various times in the movie i was confused about what was happening or how i was supposed to be reacting because of a basic lack of understanding of how tennis works).</p>
<p> <img src="/letters/images/203.jpg" alt="image.png"> </p>
<p>elsewhere in Sports, we&#39;ve also been watching <em>america&#39;s sweethearts</em>, the netflix documentary on the dallas cowboys cheerleaders which has been really interesting because on the surface it&#39;s like high gloss access journalism, which i would normally not have any interest in watching bc i do not like corporate hagiography, but actually there&#39;s no tension between depicting the team leadership in a way that meets their approval and at the same showing the truth of how horrible they are because, horribly <em>they don&#39;t think they&#39;re doing anything wrong</em> (and their ideology has been so downloaded and engrained that the cheerleaders that they don&#39;t either). the show is honestly a pretty great representations of capitalist exploitation, of trying to squeeze and squeeze more and better output from workers at the cost of their physical and mental health while paying them as little as they can possibly get away with (in the first episode someone compared her salary, as the star of this multi-million dollar enterprise, to &quot;someone who works at chic-fil-a&quot;) and also constantly reminding them how they should be <em>so grateful</em> (üñï) for this opportunity to be abused and how this is a calling not a job blah blah blah fucking burn in hell (let&#39;s not even get started on driving them to have eating disorders and then concern trolling over their low weight!). this tendency of the gross excesses of abuse, which permeates every part of the job/show, is typified in microcosm by &quot;the splits&quot; where at the end of a routine the dancers link arms, leap into the air, and land in splits, and which like everyone admits reliably cause the dancers to blow out their hips (a weird and unremarked upon echo of CTEs in the football players, but also they get big checks at least!) but well &quot;the fans love it&quot; and it is apparently impossible for decades to iterate on this choreography and find something else! the cornerstone dance routine which is also the anchor for the show is set to &quot;thunderstruck&quot; by ac/dc and they are a band that has always seemed so silly and ridiculous but the more you listen to this song while watching the women almost pass out dancing in 95 degree heat while the executives on the sidelines yell out ridiculously nitpicky comments about arbitrary things that no real person will ever notice like &quot;kelcey, your foot was too flexed&quot; or &quot;bigger eyes!&quot; and have them run the drill again and again and again, the more the opening riff sounds so sinister like truly some paganini devil shit!!</p>
<p> <img src="/letters/images/208.jpg" alt="image.png"> </p>
<h2>Previously on this day</h2>
<ul>
<li><a href="https://buttondown.email/justinwolfe/archive/thank-you-notes-krs/">2016</a> (from <strong>krs</strong>) (<em>yoga class was cancelled, the slow jazz that was blasting from speakers in a nearby part of the park, the familiarity of the landscape here in Chicago</em>) </li>
<li><a href="https://buttondown.email/justinwolfe/archive/710-7123/">2017</a> (<em>what cool breezes do, homemade milk snow, solo jazz piano</em>)</li>
<li><a href="https://buttondown.email/justinwolfe/archive/710-1594/">2018</a> (<em>watching deborah play assassin&#39;s creed, spending most evenings in vegged-out recovery mode rather than &quot;accomplishing&quot; things personality test i took for professional development at work</em>)</li>
<li><a href="https://buttondown.email/justinwolfe/archive/710/">2019</a> (<em>when you get out of work and you&#39;re in that pre-dinner &quot;what are we going to watch tonight&quot; phase and then remember that your favorite show is on that night, got to spend several hours writing code without distractions, that picture of lenny kravitz with big scarf energy, which will never not be entertaining</em>)</li>
</ul>

      </div>
    </article>

    <nav class="navigation">
      <a href="/letters/" class="btn btn-secondary">home</a>
      <div class="nav-links">
        <a href="/letters/letters/clairo-is-your-brandi-carlile.html" class="btn btn-secondary">‚Üê clairo is your brandi carlile</a>
        <a href="/letters/letters/head-vampire-of-scorpios-drake.html" class="btn btn-secondary">head vampire of scorpios drake ‚Üí</a>
      </div>
    </nav>
  
  </div>

  <script>
    // PWA installation prompt
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'flex';
      }
    });

    async function installPWA() {
      if (!deferredPrompt) {
        // If not installable, redirect to PWA
        window.location.href = '/letters/app/';
        return;
      }

      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      
      if (outcome === 'accepted') {
        console.log('PWA installed');
      }
      
      deferredPrompt = null;
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'none';
      }
    }

    function openPWA() {
      window.location.href = '/letters/app/';
    }

    // Progressive Enhancement: Check if user has PWA installed
    // If they do, redirect them to the app version for a richer experience
    if (window.matchMedia('(display-mode: standalone)').matches) {
      // User is in standalone mode (PWA is installed and running)
      // Keep them on static page - they're already in PWA mode
      console.log('Running in PWA mode');
    } else {
      // Check if user has previously used the PWA (has cached data)
      if ('caches' in window) {
        caches.keys().then(cacheNames => {
          const hasPWACache = cacheNames.some(name => 
            name.includes('static-') || name.includes('data-')
          );
          
          // Only show PWA banner if they have cached content
          if (hasPWACache) {
            const banner = document.querySelector('.pwa-banner');
            if (banner && banner.style.display === 'none') {
              banner.style.display = 'flex';
            }
          }
        });
      }
    }

    // Register service worker for all pages
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('/letters/sw.js', { scope: '/letters/' })
          .then((registration) => {
            console.log('SW registered:', registration);
          })
          .catch((error) => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>