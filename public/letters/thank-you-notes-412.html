<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="thank you notes 4/12">
  <title>thank you notes 4/12 - Thank You Notes</title>
  <link rel="manifest" href="/letters/manifest.json">
  <meta name="theme-color" content="#007bff">
  <link rel="apple-touch-icon" href="/letters/icon-192.png">
  <style>
    /**
 * Shared Styles for Thank You Notes
 * Used by both the static site and PWA version
 */

/* Base Reset and Layout */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: #f5f5f5;
  color: #333;
  line-height: 1.6;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

/* Loading and Error States */
.loading,
.error {
  text-align: center;
  padding: 3rem;
  font-size: 1.2rem;
}

.error {
  color: #dc3545;
}

/* Header */
.header {
  margin-bottom: 1.5rem;
  text-align: center;
}

.header h1 {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
}

.subtitle {
  font-size: 1rem;
  color: #666;
}

/* Controls */
.controls {
  margin-bottom: 2rem;
}

.search-container {
  position: relative;
  margin-bottom: 1rem;
}

.search-input {
  width: 100%;
  padding: 0.75rem 2.5rem 0.75rem 1rem;
  font-size: 1rem;
  border: 2px solid #dee2e6;
  border-radius: 8px;
  outline: none;
  transition: border-color 0.2s;
  background: white;
}

.search-input:focus {
  border-color: #007bff;
}

.clear-search {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 1.25rem;
  color: #6c757d;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  line-height: 1;
  transition: color 0.2s;
}

.clear-search:hover {
  color: #333;
}

.control-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.sort-container {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.sort-container label {
  font-size: 0.875rem;
  font-weight: 500;
  color: #666;
}

.sort-select {
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  border: 2px solid #dee2e6;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  outline: none;
  transition: border-color 0.2s;
}

.sort-select:focus {
  border-color: #007bff;
}

.result-count {
  font-size: 0.875rem;
  font-weight: 600;
  color: #495057;
  padding: 0.5rem 0.75rem;
  background: #e9ecef;
  border-radius: 6px;
  white-space: nowrap;
}

.btn-random {
  background: #28a745;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-random:hover {
  background: #218838;
  transform: translateY(-1px);
}

.btn-random:active {
  transform: translateY(0);
}

.searching,
.no-results {
  text-align: center;
  padding: 3rem 1rem;
  font-size: 1.1rem;
  color: #666;
}

/* Email/Letter List */
.list,
.letter-list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.email-card,
.letter-card {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  text-decoration: none;
  color: inherit;
  display: block;
}

.email-card:hover,
.letter-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.email-card-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: #e9ecef;
}

.email-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.email-card-content,
.letter-card {
  padding: 1.5rem;
}

.email-card h2,
.letter-card h2 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  font-weight: 600;
}

.email-description,
.letter-card p {
  color: #666;
  margin-bottom: 0.75rem;
  line-height: 1.5;
}

.email-search-snippet {
  color: #555;
  margin-bottom: 0.75rem;
  line-height: 1.5;
  font-style: italic;
}

.search-highlight {
  background: #fff3cd;
  color: #856404;
  font-weight: 700;
  padding: 0.1rem 0.2rem;
  border-radius: 3px;
  font-style: normal;
}

.email-date,
.letter-card time {
  display: block;
  font-size: 0.875rem;
  color: #888;
}

/* Email/Letter Reader */
.email-reader,
.letter-content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  margin-bottom: 2rem;
}

.email-reader {
  touch-action: pan-y pinch-zoom;
}

.reader-nav,
.navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background: #f8f9fa;
  border-bottom: 1px solid #dee2e6;
  gap: 1rem;
  flex-wrap: wrap;
}

.reader-nav-bottom {
  border-top: 1px solid #dee2e6;
  border-bottom: none;
}

.nav-buttons,
.nav-links {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

/* Buttons */
.btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  text-decoration: none;
  display: inline-block;
}

.btn:hover {
  transform: translateY(-1px);
}

.btn:active {
  transform: translateY(0);
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #5a6268;
}

.btn-nav {
  background: #007bff;
  color: white;
}

.btn-nav:hover {
  background: #0056b3;
}

.btn-back-arrow {
  background: none;
  border: none;
  color: #333;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  transition: color 0.2s, transform 0.1s;
  line-height: 1;
}

.btn-back-arrow:hover {
  color: #007bff;
  transform: translateX(-2px);
}

.btn-back-arrow:active {
  transform: translateX(0);
}

/* Email/Letter Content */
.email-content,
.letter-content {
  padding: 2rem 1.5rem;
}

.email-header,
.letter-header {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px solid #e9ecef;
}

.email-header h1,
.letter-header h1 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-header .email-date,
.letter-header time {
  font-size: 1rem;
  color: #666;
}

/* Email/Letter Body Styles */
.email-body,
.letter-body {
  font-size: 1.0625rem;
  line-height: 1.7;
  color: #333;
}

.email-body h1,
.email-body h2,
.email-body h3,
.email-body h4,
.email-body h5,
.email-body h6,
.letter-body h1,
.letter-body h2,
.letter-body h3,
.letter-body h4,
.letter-body h5,
.letter-body h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-body h1,
.letter-body h1 {
  font-size: 1.875rem;
}

.email-body h2,
.letter-body h2 {
  font-size: 1.5rem;
}

.email-body h3,
.letter-body h3 {
  font-size: 1.25rem;
}

.email-body p,
.letter-body p {
  margin-bottom: 1rem;
}

.email-body a,
.letter-body a {
  color: #007bff;
  text-decoration: none;
}

.email-body a:hover,
.letter-body a:hover {
  text-decoration: underline;
}

.email-body img,
.letter-body img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  margin: 1.5rem 0;
}

.email-body ul,
.email-body ol,
.letter-body ul,
.letter-body ol {
  margin-bottom: 1rem;
  padding-left: 2rem;
}

.email-body li,
.letter-body li {
  margin-bottom: 0.5rem;
}

.email-body blockquote,
.letter-body blockquote {
  margin: 1.5rem 0;
  padding-left: 1rem;
  border-left: 4px solid #e9ecef;
  color: #666;
  font-style: italic;
}

.email-body code,
.letter-body code {
  background: #f8f9fa;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

.email-body pre,
.letter-body pre {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 1.5rem 0;
}

.email-body pre code,
.letter-body pre code {
  background: none;
  padding: 0;
}

.email-body hr,
.letter-body hr {
  border: none;
  border-top: 2px solid #e9ecef;
  margin: 2rem 0;
}

/* PWA Banner */
.pwa-banner {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1rem;
  border-radius: 8px;
  margin: 1rem 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.pwa-banner-text {
  flex: 1;
  min-width: 200px;
}

.pwa-banner-text h3 {
  margin-bottom: 0.25rem;
  font-size: 1.1rem;
}

.pwa-banner-text p {
  font-size: 0.9rem;
  opacity: 0.9;
}

.btn-primary {
  background: #007bff;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-primary:hover {
  background: #0056b3;
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0);
}

.btn-primary:disabled {
  background: #6c757d;
  cursor: not-allowed;
  transform: none;
}

.btn-danger {
  background: #dc3545;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-danger:hover {
  background: #c82333;
  transform: translateY(-1px);
}

.btn-danger:active {
  transform: translateY(0);
}

/* Offline & PWA UI */
.offline-banner {
  background: #ff9800;
  color: white;
  padding: 0.75rem 1rem;
  text-align: center;
  border-radius: 8px;
  margin-bottom: 1rem;
  font-weight: 500;
}

.download-progress {
  background: white;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.download-progress-bar {
  height: 8px;
  background: #e9ecef;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.download-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #007bff, #0056b3);
  transition: width 0.3s ease;
}

.download-progress p {
  font-size: 0.875rem;
  color: #666;
  text-align: center;
  margin: 0;
}

.btn-offline {
  background: #6c757d;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-offline:hover {
  background: #5a6268;
  transform: translateY(-1px);
}

.btn-offline:active {
  transform: translateY(0);
}

.offline-panel {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.offline-panel h3 {
  margin-bottom: 1rem;
  color: #1a1a1a;
  font-size: 1.25rem;
}

.offline-stats {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1rem;
}

.offline-stats p {
  margin: 0.5rem 0;
  color: #495057;
  font-size: 0.9375rem;
}

.offline-actions {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.offline-note {
  font-size: 0.875rem;
  color: #666;
  line-height: 1.5;
  margin: 0;
  font-style: italic;
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 1rem 0.5rem;
  }

  .header h1 {
    font-size: 2rem;
  }

  .control-row {
    flex-direction: column;
    align-items: stretch;
  }

  .sort-container {
    width: 100%;
    justify-content: space-between;
  }

  .sort-select {
    flex: 1;
  }

  .result-count {
    text-align: center;
  }

  .btn-random {
    width: 100%;
  }

  .email-card-content {
    padding: 1rem;
  }

  .email-card h2 {
    font-size: 1.25rem;
  }

  .email-content,
  .letter-content {
    padding: 1.5rem 1rem;
  }

  .email-header h1,
  .letter-header h1 {
    font-size: 1.5rem;
  }

  .reader-nav,
  .navigation {
    flex-direction: column;
    align-items: stretch;
  }

  .nav-buttons,
  .nav-links {
    flex-direction: column;
  }

  .btn {
    width: 100%;
    text-align: center;
  }

  .btn-nav {
    font-size: 0.8125rem;
    white-space: normal;
    word-wrap: break-word;
  }

  body {
    padding: 10px;
  }

  .pwa-banner {
    flex-direction: column;
    text-align: center;
  }
}

@media (max-width: 480px) {
  .email-card-image {
    height: 150px;
  }

  .email-body,
  .letter-body {
    font-size: 1rem;
  }
}


    
    /* Static site specific adjustments */
    body {
      padding: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <div class="pwa-banner" style="display: none;">
      <div class="pwa-banner-text">
        <h3>📱 Read Offline</h3>
        <p>Install the app to read all letters offline</p>
      </div>
      <div>
        <button class="btn btn-primary" onclick="installPWA()">Install App</button>
      </div>
    </div>

    <article class="letter-content">
      <header class="letter-header">
        <h1>thank you notes 4/12</h1>
        <time datetime="2016-04-12T00:00:00Z">April 11, 2016</time>
      </header>

      <div class="letter-body">
        <p>i&#39;m thankful that one of my favorite writers, <a href="http://twitter.com/ruthcurry">ruth curry</a>, started a tinyletter yesterday called <a href="http://tinyletter.com/coffeeandtv">coffee &amp; tv</a>. i&#39;m thankful for the first issue of the newsletter, which has profound and funny things to say about coffee (<em>&quot;Drinking it, and not enjoying it as much as I expected to, reminded me it is actually possible to change things about your life, even things (in this case, cream and two sugars) you consider fixed or intrinsic to &#39;you.&quot;</em>), tv (&quot;<em>One of the main arcs of the show is the transformation – slow, difficult, fraught with setbacks -- of their marriage from a purely business arrangement to a “real” relationship. As a viewer, you are really, really rooting  for their relationship to work out, to stay “real,” or at least I am</em>&quot;), los angeles (&quot;<em>When I described the hotel to a coworker as &#39;fancy but kind of crappy at the same time</em>,&#39; she said, &#39;<em>Sounds like LA.&#39;</em>&quot;), and more (&quot;_cropped sweatpants, oversized tank top, extremely oversized blanket/poncho/shawl garment, bright-purple-and-turquoise New Balance 501_s&quot;). i&#39;m thankful to recommend that <a href="http://tinyletter.com/coffeeandtv">you subscribe here</a>. </p>
<p>i&#39;m thankful for <em>fear the walking dead</em>, which in its deep pocketed mediocrity has the power to make <em>the walking dead,</em> which i frequently think is pretty dumb even while still enjoying watching it, seem like a profound work of art. i&#39;m thankful, when watching badly-written TV, to play a game with D where we try to guess what cliche line the characters will say next, which definitely adds to the entertainment value. i&#39;m thankful for this pair of recent articles about new frontiers of televisual fuckery: a profile of <a href="http://www.nytimes.com/2016/04/11/business/media/on-the-job-blurring-the-private-parts-in-naked-and-afraid.html?_r=0">the staff that makes the blurs</a> on <em>naked &amp; afraid</em> and an article about &quot;<a href="http://www.vulture.com/2016/03/special-effects-c-v-r.html">how actors get plastic surgery with a mouse click</a>&quot; (&quot;<em>Ironically, digital-effects companies like Lola are now busy undoing actual plastic surgery on actors whose &#39;faces are pulled too tight,&#39; Lola’s Williams has said. &#39;They’ll come in with too much Botox. There’s no movement in their brows. There’s been a few projects where we’ve had to animate the brow to give the performance it should be giving</em>.&#39;&quot;) </p>
<p>i&#39;m thankful for last week&#39;s <a href="http://www.ew.com/article/2016/04/07/gilmore-girls-revival-ew-cover"><em>entertainment weekly</em> spread</a> about the netflix <em>gilmore girls</em> sequels and to be reminded of david cho&#39;s <a href="http://www.theawl.com/2011/05/my-latest-obsession-why-you-should-give-gilmore-girls-another-chance"><em>gilmore girls</em> advocacy</a>. i&#39;m thankful that <a href="http://www.chicagotribune.com/entertainment/tv/ct-5-reasons-gilmore-girls-needs-melissa-mccarthy-20160411-story.html">melissa mccarthy is going to be in the <em>gilmore girls</em> sequels</a>, even though her character always felt tonally like she was in a slightly different show. i&#39;m thankful that i remembered when i once made <a href="https://songsaboutbuildingsandfood.wordpress.com/?s=where+you+lead">an organ drone cover of the <em>gilmore girls</em> theme</a> (the post also includes a bonus DVD featurette about the end of the &quot;relationship&quot; described in yesterday&#39;s notes!). i&#39;m thankful for kool a.d.&#39;s verse on &quot;<a href="https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0ahUKEwih9JKklonMAhXJrYMKHRXqA0kQyCkIHjAA&url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DIg9Audtm9VI&usg=AFQjCNGbQUpRgPZ_h2Ed8Xhp49l5lV-6hg&sig2=uDLetXVPKnUu103tSfNVtg&bvm=bv.119028448,d.amc">nutmeg</a>,&quot; which begins:</p>
<p>&quot;<em>Hey yo, that’s amazing, blunt in your mouth talk</em></p>
<p><em>Silly strutters, <a href="http://www.eonline.com/news/741009/gilmore-girls-revival-sally-struthers-is-in-plus-find-out-which-other-fan-favorite-is-also-returning">Sally Struthers, Gilmore Girls</a></em></p>
<p><em>Smothers Brothers at The Fillmore</em></p>
<p><em>Hand me that capo</em></p>
<p><em>Cop all of my Snapple at Staples</em></p>
<p><em>Four flavor kettle corn</em></p>
<p><em>Heavy metal porno flick chicks with tattoos</em></p>
<p><em>Rolling up spliffs with Bambus</em>&quot;</p>
<p>i&#39;m thankful that the other morning, i was inspired, perhaps by my memory of its use on the classic <em>gilmore girls</em> episode &quot;<a href="http://gilmoregirls.wikia.com/wiki/Concert_Interruptus">concert interruptus</a>,&quot; to listen to &quot;<a href="https://www.youtube.com/watch?v=PSoOFn3wQV4">eternal flame</a>&quot; by the bangles. i&#39;m thankful, not having heard that song for a long time, for how surprised i was at the production, that i had remembered it as this intimate acoustic thing but that there are string sections and massed choirs and weird synths and a kitchen sink more of production (i&#39;m thankful that the song is still affecting despite/because of all this and thankful especially for the sweetly reassuring choral ending). i&#39;m thankful for the way susanna hoffs sings the line &quot;<em>do you feel the same,</em>&quot; which always sounds like &quot;<em>do you feel</em> a <em>same</em>?&quot; to me because of the weirdness of her enunciation or something. </p>
<p>i&#39;m thankful that recently i had a similar issue with &quot;<a href="https://www.youtube.com/watch?v=bY4OJBGBOY4">summer sixteen</a>,&quot; where i thought that drake was saying &quot;<em>tell obama that my verses are just like the whips at the end, they bulletproof</em>,&quot; which, besides seeming factually wrong (why would they just be bulletproof at the end??), combined with his line about &quot;<em>why would I put on a vest? i expect you to aim for the head</em>&quot; to make me worry for drake&#39;s security team (i&#39;m thankful i realized that line is actually &quot;<em>the</em> <em>whips that he in</em>&quot;). i&#39;m thankful for <a href="http://www.nytimes.com/2012/07/15/magazine/lady-mondegreen-and-the-miracle-of-misheard-song-lyrics.html">mondegreens</a> and for all my starbucks lovers. i&#39;m thankful for this bit of fucked up trivia from the wiki for &quot;eternal flame&quot;: &quot;<em>In the BBC programme</em> I&#39;m In a Girl Group_, Hoffs revealed she actually sang the studio recording of the song completely naked due to the producer Davitt Sigerson pranking her by telling her Olivia Newton John had done the same thing but he later told Hoffs he had been lying the whole time._&quot; i&#39;m thankful for this anecdote from the cowriter about the origin of the song and for its conflation of elvis and jesus: </p>
<p>&quot;<em>Susanna was talking about the Bangles having visited Graceland, and she said there was some type of shrine to Elvis that included some kind of eternal flame. As soon as those words were mentioned, I immediately thought of the synagogue in the town of Palm Springs, California where I grew up. I remember during our Sunday school class they would walk us through the sanctuary. There was one little red light and they told us it was called the eternal flame</em>.&quot;</p>
<p>i&#39;m thankful for the long conversation i had about dreams with a staff member in another office yesterday. i&#39;m thankful she started the conversation by asking me if i ever have dreams of flying and i told her that frustratingly i don&#39;t, that instead what i have are dreams where i leap up off the ground, my body describing an arc high into the air, and then i hit the apex of the curve and begin to fall, which is briefly terrifying, but then when i hit the ground, my legs are springs that send me back up into the sky. i&#39;m thankful she told me that when she was in high school, she always had flying dreams in which she was sitting on a piece of cardboard and flying above her mother, who was trying to grab the cardboard and pull her down to the ground--i&#39;m thankful for our ironic laughter about that dream couldn&#39;t have any real meaning. i&#39;m thankful that in conversation with her, i realized that i don&#39;t ever have running dreams, even though i run every day, but that i often have driving dreams, even though i haven&#39;t driven a car since i was 15. i&#39;m thankful that i came to her desk to get a key but that she just kept talking about dreams to me for the longest instead of giving me the key, which felt like something that would happen in a dream.</p>

      </div>
    </article>

    <nav class="navigation">
      <a href="/letters/" class="btn btn-secondary">home</a>
      <div class="nav-links">
        <a href="/letters/letters/thank-you-notes-413.html" class="btn btn-secondary">← thank you notes 4/13</a>
        <a href="/letters/letters/thank-you-notes-julia-weston2.html" class="btn btn-secondary">thank you notes (julia weston)(2) →</a>
      </div>
    </nav>
  
  </div>

  <script>
    // PWA installation prompt
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'flex';
      }
    });

    async function installPWA() {
      if (!deferredPrompt) {
        // If not installable, redirect to PWA
        window.location.href = '/letters/app/';
        return;
      }

      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      
      if (outcome === 'accepted') {
        console.log('PWA installed');
      }
      
      deferredPrompt = null;
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'none';
      }
    }

    function openPWA() {
      window.location.href = '/letters/app/';
    }

    // Progressive Enhancement: Check if user has PWA installed
    // If they do, redirect them to the app version for a richer experience
    if (window.matchMedia('(display-mode: standalone)').matches) {
      // User is in standalone mode (PWA is installed and running)
      // Keep them on static page - they're already in PWA mode
      console.log('Running in PWA mode');
    } else {
      // Check if user has previously used the PWA (has cached data)
      if ('caches' in window) {
        caches.keys().then(cacheNames => {
          const hasPWACache = cacheNames.some(name => 
            name.includes('static-') || name.includes('data-')
          );
          
          // Only show PWA banner if they have cached content
          if (hasPWACache) {
            const banner = document.querySelector('.pwa-banner');
            if (banner && banner.style.display === 'none') {
              banner.style.display = 'flex';
            }
          }
        });
      }
    }

    // Register service worker for all pages
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('/letters/sw.js', { scope: '/letters/' })
          .then((registration) => {
            console.log('SW registered:', registration);
          })
          .catch((error) => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>