<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="getting high on my own supply - 13. some rap songs">
  <title>getting high on my own supply - 13. some rap songs - Thank You Notes</title>
  <link rel="manifest" href="/letters/manifest.json">
  <meta name="theme-color" content="#007bff">
  <link rel="apple-touch-icon" href="/letters/icon-192.png">
  <style>
    /**
 * Shared Styles for Thank You Notes
 * Used by both the static site and PWA version
 */

/* Base Reset and Layout */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: #f5f5f5;
  color: #333;
  line-height: 1.6;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

/* Loading and Error States */
.loading,
.error {
  text-align: center;
  padding: 3rem;
  font-size: 1.2rem;
}

.error {
  color: #dc3545;
}

/* Header */
.header {
  margin-bottom: 1.5rem;
  text-align: center;
}

.header h1 {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
}

.subtitle {
  font-size: 1rem;
  color: #666;
}

/* Controls */
.controls {
  margin-bottom: 2rem;
}

.search-container {
  position: relative;
  margin-bottom: 1rem;
}

.search-input {
  width: 100%;
  padding: 0.75rem 2.5rem 0.75rem 1rem;
  font-size: 1rem;
  border: 2px solid #dee2e6;
  border-radius: 8px;
  outline: none;
  transition: border-color 0.2s;
  background: white;
}

.search-input:focus {
  border-color: #007bff;
}

.clear-search {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 1.25rem;
  color: #6c757d;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  line-height: 1;
  transition: color 0.2s;
}

.clear-search:hover {
  color: #333;
}

.control-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.sort-container {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.sort-container label {
  font-size: 0.875rem;
  font-weight: 500;
  color: #666;
}

.sort-select {
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  border: 2px solid #dee2e6;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  outline: none;
  transition: border-color 0.2s;
}

.sort-select:focus {
  border-color: #007bff;
}

.result-count {
  font-size: 0.875rem;
  font-weight: 600;
  color: #495057;
  padding: 0.5rem 0.75rem;
  background: #e9ecef;
  border-radius: 6px;
  white-space: nowrap;
}

.btn-random {
  background: #28a745;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-random:hover {
  background: #218838;
  transform: translateY(-1px);
}

.btn-random:active {
  transform: translateY(0);
}

.searching,
.no-results {
  text-align: center;
  padding: 3rem 1rem;
  font-size: 1.1rem;
  color: #666;
}

/* Email/Letter List */
.list,
.letter-list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.email-card,
.letter-card {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  text-decoration: none;
  color: inherit;
  display: block;
}

.email-card:hover,
.letter-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.email-card-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: #e9ecef;
}

.email-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.email-card-content,
.letter-card {
  padding: 1.5rem;
}

.email-card h2,
.letter-card h2 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  font-weight: 600;
}

.email-description,
.letter-card p {
  color: #666;
  margin-bottom: 0.75rem;
  line-height: 1.5;
}

.email-search-snippet {
  color: #555;
  margin-bottom: 0.75rem;
  line-height: 1.5;
  font-style: italic;
}

.search-highlight {
  background: #fff3cd;
  color: #856404;
  font-weight: 700;
  padding: 0.1rem 0.2rem;
  border-radius: 3px;
  font-style: normal;
}

.email-date,
.letter-card time {
  display: block;
  font-size: 0.875rem;
  color: #888;
}

/* Email/Letter Reader */
.email-reader,
.letter-content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  margin-bottom: 2rem;
}

.email-reader {
  touch-action: pan-y pinch-zoom;
}

.reader-nav,
.navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background: #f8f9fa;
  border-bottom: 1px solid #dee2e6;
  gap: 1rem;
  flex-wrap: wrap;
}

.reader-nav-bottom {
  border-top: 1px solid #dee2e6;
  border-bottom: none;
}

.nav-buttons,
.nav-links {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

/* Buttons */
.btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  text-decoration: none;
  display: inline-block;
}

.btn:hover {
  transform: translateY(-1px);
}

.btn:active {
  transform: translateY(0);
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #5a6268;
}

.btn-nav {
  background: #007bff;
  color: white;
}

.btn-nav:hover {
  background: #0056b3;
}

.btn-back-arrow {
  background: none;
  border: none;
  color: #333;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  transition: color 0.2s, transform 0.1s;
  line-height: 1;
}

.btn-back-arrow:hover {
  color: #007bff;
  transform: translateX(-2px);
}

.btn-back-arrow:active {
  transform: translateX(0);
}

/* Email/Letter Content */
.email-content,
.letter-content {
  padding: 2rem 1.5rem;
}

.email-header,
.letter-header {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px solid #e9ecef;
}

.email-header h1,
.letter-header h1 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-header .email-date,
.letter-header time {
  font-size: 1rem;
  color: #666;
}

/* Email/Letter Body Styles */
.email-body,
.letter-body {
  font-size: 1.0625rem;
  line-height: 1.7;
  color: #333;
}

.email-body h1,
.email-body h2,
.email-body h3,
.email-body h4,
.email-body h5,
.email-body h6,
.letter-body h1,
.letter-body h2,
.letter-body h3,
.letter-body h4,
.letter-body h5,
.letter-body h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-body h1,
.letter-body h1 {
  font-size: 1.875rem;
}

.email-body h2,
.letter-body h2 {
  font-size: 1.5rem;
}

.email-body h3,
.letter-body h3 {
  font-size: 1.25rem;
}

.email-body p,
.letter-body p {
  margin-bottom: 1rem;
}

.email-body a,
.letter-body a {
  color: #007bff;
  text-decoration: none;
}

.email-body a:hover,
.letter-body a:hover {
  text-decoration: underline;
}

.email-body img,
.letter-body img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  margin: 1.5rem 0;
}

.email-body ul,
.email-body ol,
.letter-body ul,
.letter-body ol {
  margin-bottom: 1rem;
  padding-left: 2rem;
}

.email-body li,
.letter-body li {
  margin-bottom: 0.5rem;
}

.email-body blockquote,
.letter-body blockquote {
  margin: 1.5rem 0;
  padding-left: 1rem;
  border-left: 4px solid #e9ecef;
  color: #666;
  font-style: italic;
}

.email-body code,
.letter-body code {
  background: #f8f9fa;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

.email-body pre,
.letter-body pre {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 1.5rem 0;
}

.email-body pre code,
.letter-body pre code {
  background: none;
  padding: 0;
}

.email-body hr,
.letter-body hr {
  border: none;
  border-top: 2px solid #e9ecef;
  margin: 2rem 0;
}

/* PWA Banner */
.pwa-banner {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1rem;
  border-radius: 8px;
  margin: 1rem 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.pwa-banner-text {
  flex: 1;
  min-width: 200px;
}

.pwa-banner-text h3 {
  margin-bottom: 0.25rem;
  font-size: 1.1rem;
}

.pwa-banner-text p {
  font-size: 0.9rem;
  opacity: 0.9;
}

.btn-primary {
  background: #007bff;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-primary:hover {
  background: #0056b3;
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0);
}

.btn-primary:disabled {
  background: #6c757d;
  cursor: not-allowed;
  transform: none;
}

.btn-danger {
  background: #dc3545;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-danger:hover {
  background: #c82333;
  transform: translateY(-1px);
}

.btn-danger:active {
  transform: translateY(0);
}

/* Offline & PWA UI */
.offline-banner {
  background: #ff9800;
  color: white;
  padding: 0.75rem 1rem;
  text-align: center;
  border-radius: 8px;
  margin-bottom: 1rem;
  font-weight: 500;
}

.download-progress {
  background: white;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.download-progress-bar {
  height: 8px;
  background: #e9ecef;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.download-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #007bff, #0056b3);
  transition: width 0.3s ease;
}

.download-progress p {
  font-size: 0.875rem;
  color: #666;
  text-align: center;
  margin: 0;
}

.btn-offline {
  background: #6c757d;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-offline:hover {
  background: #5a6268;
  transform: translateY(-1px);
}

.btn-offline:active {
  transform: translateY(0);
}

.offline-panel {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.offline-panel h3 {
  margin-bottom: 1rem;
  color: #1a1a1a;
  font-size: 1.25rem;
}

.offline-stats {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1rem;
}

.offline-stats p {
  margin: 0.5rem 0;
  color: #495057;
  font-size: 0.9375rem;
}

.offline-actions {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.offline-note {
  font-size: 0.875rem;
  color: #666;
  line-height: 1.5;
  margin: 0;
  font-style: italic;
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 1rem 0.5rem;
  }

  .header h1 {
    font-size: 2rem;
  }

  .control-row {
    flex-direction: column;
    align-items: stretch;
  }

  .sort-container {
    width: 100%;
    justify-content: space-between;
  }

  .sort-select {
    flex: 1;
  }

  .result-count {
    text-align: center;
  }

  .btn-random {
    width: 100%;
  }

  .email-card-content {
    padding: 1rem;
  }

  .email-card h2 {
    font-size: 1.25rem;
  }

  .email-content,
  .letter-content {
    padding: 1.5rem 1rem;
  }

  .email-header h1,
  .letter-header h1 {
    font-size: 1.5rem;
  }

  .reader-nav,
  .navigation {
    flex-direction: column;
    align-items: stretch;
  }

  .nav-buttons,
  .nav-links {
    flex-direction: column;
  }

  .btn {
    width: 100%;
    text-align: center;
  }

  .btn-nav {
    font-size: 0.8125rem;
    white-space: normal;
    word-wrap: break-word;
  }

  body {
    padding: 10px;
  }

  .pwa-banner {
    flex-direction: column;
    text-align: center;
  }
}

@media (max-width: 480px) {
  .email-card-image {
    height: 150px;
  }

  .email-body,
  .letter-body {
    font-size: 1rem;
  }
}

    
    /* Static site specific adjustments */
    body {
      padding: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <div class="pwa-banner" style="display: none;">
      <div class="pwa-banner-text">
        <h3>📱 Read Offline</h3>
        <p>Install the app to read all letters offline</p>
      </div>
      <div>
        <button class="btn btn-primary" onclick="installPWA()">Install App</button>
      </div>
    </div>

    <article class="letter-content">
      <header class="letter-header">
        <h1>getting high on my own supply - 13. some rap songs</h1>
        <time datetime="2024-11-02T15:16:30.515462Z">November 2, 2024</time>
      </header>

      <div class="letter-body">
        <p><em><a href="https://www.justinwolfe.me/getting-high#ep-13">listen and read on the web</a></em></p>
<ul>
<li>&quot;<a href="https://www.justinwolfe.me/getting-high/13/t.s.a..mp3">t.s.a</a>&quot; (oct 2007)</li>
<li>&quot;<a href="https://www.justinwolfe.me/getting-high/13/tell%20me%20when%20to%20go%20(e-40).mp3">tell me when to go</a>&quot; (oct 2007)</li>
</ul>
<p><img src="/letters/images/123.webp" alt="IMG_9519.PNG"></p>
<p>the first CD i bought with my own money was the soundtrack to the 1999 remake of <em>godzilla</em>, which i liked multiple songs from (jamiroquai, rage, the wallflowers cover of &quot;<a href="https://www.youtube.com/watch?v=uDiXqjwb7Sg&pp=ygUSd2FsbGZsb3dlcnMgaGVyb2Vz">heroes</a>&quot; with e-bow lead guitar) but which i bought for &quot;<a href="https://www.youtube.com/watch?v=aC4BC-Hxq9g&pp=ygUXY29tZSB3aXRoIG1lIHB1ZmYgZGFkZHk%3D">come with me</a>,&quot; the puff daddy song built on a sample of led zeppelin&#39;s &quot;<a href="https://www.youtube.com/watch?v=sfR_HWMzgyc&pp=ygUUa2FzaG1pciBsZWQgemVwcGVsaW4%3D">kashmir</a>&quot;. as a devoted daily <em>total request live</em> viewer and you know just human being living in america, i had of course listened to and enjoyed other rap songs, but &quot;come with me&quot; is the first memory i have of being genuinely <em>obsessed</em> with one. i was addicted to how powerful it made me feel, like a rollercoaster of testosterone, words surfing the waves of the riff. i would listen to that one track on a loop (i don&#39;t even think i had my own CD player at the time, so i was listening to it on soft foam headphones wired into our family computer), trying to fill myself with its energy.</p>
<p><img src="/letters/images/119.webp" alt="IMG_9522.PNG"></p>
<p>for most of the rest of high school, i went fully into a classic rock rabbit hole (with limited exceptions for the &quot;the band&quot; garage rock revivalists of the early aughts) and ignored hip hop, but my freshman year of college, a mind-expanding time for anyone but definitely for me, saw the release of danger mouse&#39;s <em>the gray album</em>, which combined acapellas from jay-z&#39;s <em>the black album</em> with loops and chops of beatles songs (something that was only fully possible because of the recent release of <em>the beatles rock band</em> video game, the isolated instrumental tracks which were required for the game to work having leaked). you couldn&#39;t have designed a better hip hop entry point for the 18 year old version of me and i listened to those remixes over and over, first for the beats that defamiliarized these songs i knew so well and the magic of how their fragments were put together into something new, but then also increasingly for the words, how funny and clever and aphoristic jay-z was, the effortless charm and virtuosity of his flows, a love which then led to listening to the originals on <em>the black album</em> and moving on to <em>the blueprint</em> (and kanye/just blaze chipmunk soul, a sound that will forever shine in my synapses) and beyond. this was also the semester that kanye&#39;s &quot;<a href="https://www.youtube.com/watch?v=8kyWDhB_QeI&pp=ygUOYWxsIGZhbGxzIGRvd24%3D">all falls down</a>&quot; (which as a lover of lauryn hill&#39;s mtv unplugged i was already predisposed toward) / <em>the college dropout</em> blew up and those songs were just undeniably good and catchy. in the latter half of college, MP3 blogs and data CDRs fueling a neo-backpack era, i was most obsessed with a tribe called quest and digable planets and the roots.</p>
<p><img src="/letters/images/122.webp" alt="IMG_9521.PNG"></p>
<p>one of the songs that i recorded around this time in our chronology but won&#39;t be playing for you in full here is &quot;let&#39;s do the gang bang&quot;, which was based around the idea that cole porter was kind of the playful linguistic vanguard of his time in the way that rappers were with language in the present day so what if i made an old timey sounding jazz song (i had gotten a plugin that made recordings sound like wax) that was kind of &quot;you&#39;re the top&quot; vibes but the topic was gang bangs hahahahaha. i thought this was so clever and hilarious! it was ironic, of course, i did not &quot;support&quot; gang bangs, that was what made it &quot;funny&quot;, and yet like so much of the ironic isms of this era the irony has no meaningful target or purpose—it&#39;s just empty, a &quot;joke&quot; that normalizes and reifies instead of critiquing. other songs i won&#39;t play for you: covers of some of my favorite jay-z songs (&quot;girls, girls, girls&quot; and &quot;hola hovito&quot;) where i rap the n word (a word i would never have <em>said</em>, but thought there was absolutely no problem with rapping, what else were you supposed to do?) and recite a panoply of racist and misogynistic stereotypes (i thought because they were affectionate (in the chorus he&#39;s saying he <em>loves</em> girls!) that meant they couldn&#39;t be offensive) and a halloween song punning on the notion of &quot;spook&quot; being a racist term for black people and a nickname for undercover CIA agents to talk about me as a white rapper and how i related to hip hop (the least interesting and most problematic (yet also most common!) topic for any white rapper). </p>
<p><img src="/letters/images/120.webp" alt="IMG_9548.PNG"></p>
<p>i&#39;m embarrassed by all of these, as any decent person in 2024 would be (i thought i was a decent person in 2007, but it is hard to square that with the traces that remain). my first rap god puff daddy is now of course a living breathing moral stain and in a similar vein i don&#39;t listen to kanye anymore, even though he&#39;s probably the most important musician of my adult life and a massive influence on my own work, because i can&#39;t enjoy his songs the same way now knowing the rabid anti-semitism and fascist ideology that live in his mind. obviously if you are this far in this post, i claim no purity ring or moral high ground: these are lines i&#39;ve drawn for myself in my feelings and i think they&#39;re different for everybody (i highly recommend the book <em><a href="https://www.powells.com/book/monsters-9780525655114?gad_source=1&gclid=Cj0KCQjwm5e5BhCWARIsANwm06gcAEHoOMCSYVJpU84URyBDPeESbfq4RJF67vOisZZ8wcryO0GkAFsaAvraEALw_wcB">monsters: a fan&#39;s dilemma</a></em> by claire dederer, for a fuller exploration of this phenomenon). </p>
<p><img src="/letters/images/121.webp" alt="IMG_9529.PNG"></p>
<p>this week was the release date of tyler&#39;s <em>chromakopia</em>, which i&#39;ve listened to straight through a couple of times and is amazing—rich, textured, weird, playful, epic. earl sweatshirt is my favorite rapper alive but i didn&#39;t get as deep into early odd future or tyler as i think i otherwise might have because at the time (what felt like mostly) tyler&#39;s tendency toward aggressive transgressions and slurs repelled my white liberal sensibilities. i haven&#39;t gone back and listened to the old stuff much (though today i did return to the song where i first heard earl, &quot;<a href="https://www.youtube.com/watch?v=ZyYW67Gj4EA">molliwopped</a>&quot;, and it still hits, a fun-size candy bar of ego dope) to find out whether i&#39;d feel the same way or not (like it matters, maybe that music just isn&#39;t <em>for</em> me), but i love the albums he&#39;s made in recent years: he&#39;s still messy and complicated and wants to push buttons, but he&#39;s also a sophisticated and mature artist.</p>
<p><img src="/letters/images/125.webp" alt="IMG_9547.PNG"></p>
<p>i was not a sophisticated and mature artist in 2007 but there are two rap songs that i recorded around this time that i still feel fond enough of to let you hear. one is an original called &quot;t.s.a&quot; and is a profane [extremely just blaze voice] public service announcement (t.s.a. stands for titties service announcement) about breast cancer awareness and how i was happy to examine any and all breasts for safety (i had touched 0 breasts at this time in my life, though a friend who liked flashing people when drunk enough had flashed me once), built around a post-&quot;hustlin&#39;&quot; octave down vocal hook (my voice cracks on the verses like i am a teenager, but also one of my favorite lyrics in my oeuvre is &quot;<em>your titties is objects, they&#39;re the apples of my eye / but behind &#39;em is your heart and that&#39;s the whole pie</em>&quot;). the other is a cover of &quot;<a href="https://www.youtube.com/watch?v=2GZbaXdK8Js">tell me when to go</a>&quot; by e-40, a song my friends and i were obsessed with in college when it came out. for a variety of reasons, i&#39;m glad that i didn&#39;t try to do the song straight but instead rock it softer, crisply whispering in your ears back and forth across the stereo field, the chorus rising over fields of piano and brass and cheap synthesized brass, my ghost riding the whip.</p>
<p><img src="/letters/images/127.webp" alt="IMG_9549.PNG">
<img src="/letters/images/126.webp" alt="IMG_9540.PNG">
<img src="/letters/images/124.jpg" alt="IMG_9550.jpg"></p>

      </div>
    </article>

    <nav class="navigation">
      <a href="/letters/" class="btn btn-secondary">home</a>
      <div class="nav-links">
        <a href="/letters/letters/anniversary.html" class="btn btn-secondary">← anniversary</a>
        <a href="/letters/letters/getting-high-on-my-own-supply-12-lunch-poems-pt-1.html" class="btn btn-secondary">getting high on my own supply - 12. lunch poems, pt. 1 →</a>
      </div>
    </nav>
  
  </div>

  <script>
    // PWA installation prompt
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'flex';
      }
    });

    async function installPWA() {
      if (!deferredPrompt) {
        // If not installable, redirect to PWA
        window.location.href = '/letters/app/';
        return;
      }

      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      
      if (outcome === 'accepted') {
        console.log('PWA installed');
      }
      
      deferredPrompt = null;
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'none';
      }
    }

    function openPWA() {
      window.location.href = '/letters/app/';
    }

    // Progressive Enhancement: Check if user has PWA installed
    // If they do, redirect them to the app version for a richer experience
    if (window.matchMedia('(display-mode: standalone)').matches) {
      // User is in standalone mode (PWA is installed and running)
      // Keep them on static page - they're already in PWA mode
      console.log('Running in PWA mode');
    } else {
      // Check if user has previously used the PWA (has cached data)
      if ('caches' in window) {
        caches.keys().then(cacheNames => {
          const hasPWACache = cacheNames.some(name => 
            name.includes('static-') || name.includes('data-')
          );
          
          // Only show PWA banner if they have cached content
          if (hasPWACache) {
            const banner = document.querySelector('.pwa-banner');
            if (banner && banner.style.display === 'none') {
              banner.style.display = 'flex';
            }
          }
        });
      }
    }

    // Register service worker for all pages
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('/letters/sw.js', { scope: '/letters/' })
          .then((registration) => {
            console.log('SW registered:', registration);
          })
          .catch((error) => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>