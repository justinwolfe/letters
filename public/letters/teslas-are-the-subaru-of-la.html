<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="teslas are the subaru of LA">
  <title>teslas are the subaru of LA - Thank You Notes</title>
  <link rel="manifest" href="/letters/manifest.json">
  <meta name="theme-color" content="#007bff">
  <link rel="apple-touch-icon" href="/letters/icon-192.png">
  <style>
    /**
 * Shared Styles for Thank You Notes
 * Used by both the static site and PWA version
 */

/* Base Reset and Layout */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: #f5f5f5;
  color: #333;
  line-height: 1.6;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

/* Loading and Error States */
.loading,
.error {
  text-align: center;
  padding: 3rem;
  font-size: 1.2rem;
}

.error {
  color: #dc3545;
}

/* Header */
.header {
  margin-bottom: 1.5rem;
  text-align: center;
}

.header h1 {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
}

.subtitle {
  font-size: 1rem;
  color: #666;
}

/* Controls */
.controls {
  margin-bottom: 2rem;
}

.search-container {
  position: relative;
  margin-bottom: 1rem;
}

.search-input {
  width: 100%;
  padding: 0.75rem 2.5rem 0.75rem 1rem;
  font-size: 1rem;
  border: 2px solid #dee2e6;
  border-radius: 8px;
  outline: none;
  transition: border-color 0.2s;
  background: white;
}

.search-input:focus {
  border-color: #007bff;
}

.clear-search {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 1.25rem;
  color: #6c757d;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  line-height: 1;
  transition: color 0.2s;
}

.clear-search:hover {
  color: #333;
}

.control-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.sort-container {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.sort-container label {
  font-size: 0.875rem;
  font-weight: 500;
  color: #666;
}

.sort-select {
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  border: 2px solid #dee2e6;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  outline: none;
  transition: border-color 0.2s;
}

.sort-select:focus {
  border-color: #007bff;
}

.result-count {
  font-size: 0.875rem;
  font-weight: 600;
  color: #495057;
  padding: 0.5rem 0.75rem;
  background: #e9ecef;
  border-radius: 6px;
  white-space: nowrap;
}

.btn-random {
  background: #28a745;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-random:hover {
  background: #218838;
  transform: translateY(-1px);
}

.btn-random:active {
  transform: translateY(0);
}

.searching,
.no-results {
  text-align: center;
  padding: 3rem 1rem;
  font-size: 1.1rem;
  color: #666;
}

/* Email/Letter List */
.list,
.letter-list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.email-card,
.letter-card {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  text-decoration: none;
  color: inherit;
  display: block;
}

.email-card:hover,
.letter-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.email-card-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: #e9ecef;
}

.email-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.email-card-content,
.letter-card {
  padding: 1.5rem;
}

.email-card h2,
.letter-card h2 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  font-weight: 600;
}

.email-description,
.letter-card p {
  color: #666;
  margin-bottom: 0.75rem;
  line-height: 1.5;
}

.email-search-snippet {
  color: #555;
  margin-bottom: 0.75rem;
  line-height: 1.5;
  font-style: italic;
}

.search-highlight {
  background: #fff3cd;
  color: #856404;
  font-weight: 700;
  padding: 0.1rem 0.2rem;
  border-radius: 3px;
  font-style: normal;
}

.email-date,
.letter-card time {
  display: block;
  font-size: 0.875rem;
  color: #888;
}

/* Email/Letter Reader */
.email-reader,
.letter-content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  margin-bottom: 2rem;
}

.email-reader {
  touch-action: pan-y pinch-zoom;
}

.reader-nav,
.navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background: #f8f9fa;
  border-bottom: 1px solid #dee2e6;
  gap: 1rem;
  flex-wrap: wrap;
}

.reader-nav-bottom {
  border-top: 1px solid #dee2e6;
  border-bottom: none;
}

.nav-buttons,
.nav-links {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

/* Buttons */
.btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  text-decoration: none;
  display: inline-block;
}

.btn:hover {
  transform: translateY(-1px);
}

.btn:active {
  transform: translateY(0);
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #5a6268;
}

.btn-nav {
  background: #007bff;
  color: white;
}

.btn-nav:hover {
  background: #0056b3;
}

.btn-back-arrow {
  background: none;
  border: none;
  color: #333;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  transition: color 0.2s, transform 0.1s;
  line-height: 1;
}

.btn-back-arrow:hover {
  color: #007bff;
  transform: translateX(-2px);
}

.btn-back-arrow:active {
  transform: translateX(0);
}

/* Email/Letter Content */
.email-content,
.letter-content {
  padding: 2rem 1.5rem;
}

.email-header,
.letter-header {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px solid #e9ecef;
}

.email-header h1,
.letter-header h1 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-header .email-date,
.letter-header time {
  font-size: 1rem;
  color: #666;
}

/* Email/Letter Body Styles */
.email-body,
.letter-body {
  font-size: 1.0625rem;
  line-height: 1.7;
  color: #333;
}

.email-body h1,
.email-body h2,
.email-body h3,
.email-body h4,
.email-body h5,
.email-body h6,
.letter-body h1,
.letter-body h2,
.letter-body h3,
.letter-body h4,
.letter-body h5,
.letter-body h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-body h1,
.letter-body h1 {
  font-size: 1.875rem;
}

.email-body h2,
.letter-body h2 {
  font-size: 1.5rem;
}

.email-body h3,
.letter-body h3 {
  font-size: 1.25rem;
}

.email-body p,
.letter-body p {
  margin-bottom: 1rem;
}

.email-body a,
.letter-body a {
  color: #007bff;
  text-decoration: none;
}

.email-body a:hover,
.letter-body a:hover {
  text-decoration: underline;
}

.email-body img,
.letter-body img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  margin: 1.5rem 0;
}

.email-body ul,
.email-body ol,
.letter-body ul,
.letter-body ol {
  margin-bottom: 1rem;
  padding-left: 2rem;
}

.email-body li,
.letter-body li {
  margin-bottom: 0.5rem;
}

.email-body blockquote,
.letter-body blockquote {
  margin: 1.5rem 0;
  padding-left: 1rem;
  border-left: 4px solid #e9ecef;
  color: #666;
  font-style: italic;
}

.email-body code,
.letter-body code {
  background: #f8f9fa;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

.email-body pre,
.letter-body pre {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 1.5rem 0;
}

.email-body pre code,
.letter-body pre code {
  background: none;
  padding: 0;
}

.email-body hr,
.letter-body hr {
  border: none;
  border-top: 2px solid #e9ecef;
  margin: 2rem 0;
}

/* PWA Banner */
.pwa-banner {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1rem;
  border-radius: 8px;
  margin: 1rem 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.pwa-banner-text {
  flex: 1;
  min-width: 200px;
}

.pwa-banner-text h3 {
  margin-bottom: 0.25rem;
  font-size: 1.1rem;
}

.pwa-banner-text p {
  font-size: 0.9rem;
  opacity: 0.9;
}

.btn-primary {
  background: #007bff;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-primary:hover {
  background: #0056b3;
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0);
}

.btn-primary:disabled {
  background: #6c757d;
  cursor: not-allowed;
  transform: none;
}

.btn-danger {
  background: #dc3545;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-danger:hover {
  background: #c82333;
  transform: translateY(-1px);
}

.btn-danger:active {
  transform: translateY(0);
}

/* Offline & PWA UI */
.offline-banner {
  background: #ff9800;
  color: white;
  padding: 0.75rem 1rem;
  text-align: center;
  border-radius: 8px;
  margin-bottom: 1rem;
  font-weight: 500;
}

.download-progress {
  background: white;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.download-progress-bar {
  height: 8px;
  background: #e9ecef;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.download-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #007bff, #0056b3);
  transition: width 0.3s ease;
}

.download-progress p {
  font-size: 0.875rem;
  color: #666;
  text-align: center;
  margin: 0;
}

.btn-offline {
  background: #6c757d;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-offline:hover {
  background: #5a6268;
  transform: translateY(-1px);
}

.btn-offline:active {
  transform: translateY(0);
}

.offline-panel {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.offline-panel h3 {
  margin-bottom: 1rem;
  color: #1a1a1a;
  font-size: 1.25rem;
}

.offline-stats {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1rem;
}

.offline-stats p {
  margin: 0.5rem 0;
  color: #495057;
  font-size: 0.9375rem;
}

.offline-actions {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.offline-note {
  font-size: 0.875rem;
  color: #666;
  line-height: 1.5;
  margin: 0;
  font-style: italic;
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 1rem 0.5rem;
  }

  .header h1 {
    font-size: 2rem;
  }

  .control-row {
    flex-direction: column;
    align-items: stretch;
  }

  .sort-container {
    width: 100%;
    justify-content: space-between;
  }

  .sort-select {
    flex: 1;
  }

  .result-count {
    text-align: center;
  }

  .btn-random {
    width: 100%;
  }

  .email-card-content {
    padding: 1rem;
  }

  .email-card h2 {
    font-size: 1.25rem;
  }

  .email-content,
  .letter-content {
    padding: 1.5rem 1rem;
  }

  .email-header h1,
  .letter-header h1 {
    font-size: 1.5rem;
  }

  .reader-nav,
  .navigation {
    flex-direction: column;
    align-items: stretch;
  }

  .nav-buttons,
  .nav-links {
    flex-direction: column;
  }

  .btn {
    width: 100%;
    text-align: center;
  }

  .btn-nav {
    font-size: 0.8125rem;
    white-space: normal;
    word-wrap: break-word;
  }

  body {
    padding: 10px;
  }

  .pwa-banner {
    flex-direction: column;
    text-align: center;
  }
}

@media (max-width: 480px) {
  .email-card-image {
    height: 150px;
  }

  .email-body,
  .letter-body {
    font-size: 1rem;
  }
}


    
    /* Static site specific adjustments */
    body {
      padding: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <div class="pwa-banner" style="display: none;">
      <div class="pwa-banner-text">
        <h3>üì± Read Offline</h3>
        <p>Install the app to read all letters offline</p>
      </div>
      <div>
        <button class="btn btn-primary" onclick="installPWA()">Install App</button>
      </div>
    </div>

    <article class="letter-content">
      <header class="letter-header">
        <h1>teslas are the subaru of LA</h1>
        <time datetime="2024-02-10T21:20:51.645133Z">February 10, 2024</time>
      </header>

      <div class="letter-body">
        <p><a href="https://www.instagram.com/ellenogradyart/p/C3LYwswPqMl/"><img src="/letters/images/418.jpg" alt="image.png"></a></p>
<p>i&#39;m thankful we could afford to take a brief vacation to LA last weekend to get out of endless rainy portland winter, even though as it turned out it rained, often heavily, basically all day every day the entire time we were there, yielding to reveal the sun only the cold morning we left for the airport to go home (i&#39;m thankful for a former coworker who lives in london and whenever she is flying out somewhere else posts a picture of the tarmac to her stories to show that london is once again sunny the exact moment she leaves it).</p>
<p>i&#39;m thankful, as a person who does not drive and who loves very much walking long distances in most types of weather but who does not like doing so in the rain when not adequately protected, for the existence of ride share apps, even though i know that in many ways they are bad. i&#39;m thankful for the experience of taking the shortest uber ride i have ever taken to avoid getting drenched and cold again after having just barely kind of dried off.</p>
<p><img src="/letters/images/417.jpg" alt="image.png"> </p>
<p>i&#39;m thankful for the truism that everyone in portland drives a subaru and thankful for d&#39;s observation that teslas are the subaru of LA, which led to a game of pointing out all the teslas we saw (along with her observation that some of them have translucent roofs which provided information about the degree to which i do not look up but also i was underwhelmed because in my head i imagine the glass not being tinted which of course it would need to be for safety reasons). i&#39;m thankful that we were at a stationery store and i overheard two women around our age talking about concerts and woman one asked the other if she&#39;d been to any hardcore shows and woman two said &quot;i&#39;ve never been to like a DEIY show&quot;</p>
<p>i&#39;m thankful that we stayed in koreatown because that meant our favorite restaurants (and multiple H Marts) were all within easy walking distance and we could go to them repeatedly. i&#39;m thankful for for the whole fried fish that comes with the soondubu at BCD tofu (and the experience, if you get the seafood version which we always do, of slurping a mussel shell full of broth and tofu and the meat, the seollongtang with assorted meats at sun nong dan that comes with the perfect (and heaping) trinity of fresh panchan (cabbage (for me), radish (for deborah), scallion (to share)) and the overpriced but heavenly hand rolls at kazunori (the creamy scallop and crab and i don&#39;t even generally love creamy as a savory food adjective). i&#39;m thankful that as someone who didn&#39;t read <em>the catcher in the rye</em> at the right age to read it and coming to it later was like &quot;why do people like this so much?&quot; i have a similar experience of in-n-out but i&#39;m thankful that we ate it outside while hungry during a short break in the rain and it totally hit the spot.</p>
<p>i&#39;m thankful despite many obstacles we got to hang out with h on our last night there and got out of the rain and into a bar where deborah ordered the worst tasting $17 cocktail i have ever drunk which she clearly hated and i traded to give her my better tasting cocktail thinking i could force myself to drink it but it was so gross (fernet-based don&#39;t @ me) that i just stopped and occasionally pretended to be taking a sip but then after drinking my drink and realizing i wasn&#39;t drinking the other one at all was buzzed enough that the taste didn&#39;t matter to her and so she downed the whole thing and afterward i tried to pass a law that she could never again in her life order a cocktail at a bar that could not be plausibly described as &quot;sweet and fruity. i&#39;m thankful for the taco place we went to which had whatever fillings and salsas but did this really cool thing where they sandwiched a spiderweb of hard fried cheese in between the two tortillas of the taco and also we&#39;d managed to get the one outside table under an umbrella with a heat lamp.</p>
<p><img src="/letters/images/420.jpg" alt="image.png"> </p>
<p>i&#39;m thankful that the hotel was across the street from a 7/11 and i&#39;m also thankful that we ate and drank various things from the minibar (which growing up just seemed like something people in movies did and like not actually real? which also reminds me of a meme that really made me laugh that shows a table covered with an elaborate array of healthy portions of various breakfast foods and then the caption is something like &quot;breakfasts kids in 90s movies take a single bite of and then leave&quot;). i&#39;m thankful that i learned as we discussed what she might drink from the minibar she had been operating in a reality where &quot;underwood&quot; canned wine is carrie underwood&#39;s vanity brand (her 818). i&#39;m thankful for the experience of standing outside of the hotel smoking a joint just barely dry under an overhang as the rain falls heavily all around (i&#39;m thankful that weed is legal in california, even though it is so expensive compared to oregon).  </p>
<p>i&#39;m thankful that though i had a deeply unpleasant digestive health complaint which had me thinking that i might have to go to the hospital (i&#39;m totally fine) and which i will say nothing more specific of because it&#39;s gross but i have to record it here because i don&#39;t know if i have ever in my life felt such a deep intense chemical rush of gratitude as i did when i knew it was over!</p>
<p>i&#39;m thankful, when stuck in a hotel room more than you expected to be, for the experience of surfing basic cable, which is like so deeply proustian in me. i&#39;m thankful that this trip i primarily switched back and forth between a marathon of <em>below deck</em> on bravo and a marathon of <em>the hunger games</em> on amc. i&#39;m thankful for the formal experience of half-watching two different TV channels and trying to surf back and forth between them, always chasing an unreachable high where their commercial breaks line up just right and you&#39;ve beat the system), which is a mode of consumption not replicated in the streaming era (or i guess it is, but different, since instead of toggling back and forth between content in one screen you&#39;re toggling back and forth between two different screens).  </p>
<p><img src="/letters/images/419.jpg" alt="image.png"> </p>
<p>i&#39;m thankful for how ridiculous <em>true detective: night country</em> (after <em>a murder at the end of the world</em> it&#39;s really been a bad year for snowy murder shows!) is (which is not a shock since the other seasons were all ridiculous in their own ways) but that i continue to be entertained by it especially an extended sequence in last night&#39;s episode of jodie foster reexamining footage on her phone like she is scrubbing through a porn video which seemed to hook into an interesting larger genre critique in the episode. i&#39;m thankful that <em>survivor</em> is coming back soon (i wish <em>survivor</em> was just constantly on and it already basically is). i&#39;m thankful we tried to watch this korean reality dating show called <em>heart signal</em> and the first episode was like two hours of nothing at all happening it makes <em>terrace house</em> look like dickens (one of my theories about why it was so boring is that the contestants weren&#39;t allowed to share their ages or professions and i feel like age and thinking about your age relative to others is so infused into the culture to the level of the language that maybe that was why they literally had nothing to say).  </p>
<p><img src="/letters/images/416.jpg" alt="image.png"> </p>
<p>i&#39;m thankful we were talking to my parents about watching the current season of <em>the traitors</em> (which is entertaining though unpopular opinion the show would be better without alan cumming) and i did the riff i do often about how reality shows would be so improved if you could cut out all the repetition and previewing and just watch pure &quot;fresh content&quot; and my dad did the hack bit he does where he&#39;s always like &quot;well why don&#39;t you make the app and get rich!&quot; but i feel like while it&#39;s not a hard problem technically to process video in that way, it&#39;s really not a problem that can be solved externally in any way that&#39;s usable because of a lack of external access to the underlying video for most people (even i&#39;m too lazy to torrent now)‚Äîit has to be handled internally by the services themselves (like i could envision a bad version of it where someone is actually manually tagging the repetitions in the shows using a chrome extension and then those sequences are shared and used to drive the playback in the browser), but it doesn&#39;t scale). i&#39;m thankful to listen to <em>the office</em> sometimes while playing guitar because there&#39;s no soundtrack so it doesn&#39;t disturb my playing.</p>
<p>i&#39;m thankful for the movie <em>american fiction</em>, which was incredible and one of the very rare times i think a movie actually improves on a book (which i put down to a certain infusion of sentiment, both in the individual performances (especially jeffrey wright&#39;s, which is beautiful) and in the way small moments of grace, often superfluous to the plot, are framed and presented, and normally i am really allergic to sentiment but i feel like the movie totally earned it. you do miss some of the metatextual experience of reading the actual full text of <em>my pafology</em> but also idk how you would translate that cinematically and the compromise they come to is pretty good).  </p>
<p><img src="/letters/images/421.jpg" alt="image.png"> </p>
<h2>Previously on this day</h2>
<ul>
<li><a href="https://buttondown.email/justinwolfe/archive/thank-you-notes-210/">2016</a> (<em>bizarre dream, biking on ice, simulation of the ocean</em>)</li>
<li><a href="https://buttondown.email/justinwolfe/archive/21017/">2017</a> (<em>my last day at this job, fish sauce on pizza, the feelings linger in the ends of the hair</em>)</li>
<li><a href="https://buttondown.email/justinwolfe/archive/slack-dming-someone-a-joke-in-a-boring-meeting/">2021</a> (<em>free britney</em>, <em>jonathan strange and mr. norrell</em>, <em>slack DM</em>)</li>
</ul>

      </div>
    </article>

    <nav class="navigation">
      <a href="/letters/" class="btn btn-secondary">home</a>
      <div class="nav-links">
        <a href="/letters/letters/my-favorite-recent-book.html" class="btn btn-secondary">‚Üê my favorite recent book</a>
        <a href="/letters/letters/bulldozing-for-content.html" class="btn btn-secondary">bulldozing for content ‚Üí</a>
      </div>
    </nav>
  
  </div>

  <script>
    // PWA installation prompt
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'flex';
      }
    });

    async function installPWA() {
      if (!deferredPrompt) {
        // If not installable, redirect to PWA
        window.location.href = '/letters/app/';
        return;
      }

      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      
      if (outcome === 'accepted') {
        console.log('PWA installed');
      }
      
      deferredPrompt = null;
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'none';
      }
    }

    function openPWA() {
      window.location.href = '/letters/app/';
    }

    // Progressive Enhancement: Check if user has PWA installed
    // If they do, redirect them to the app version for a richer experience
    if (window.matchMedia('(display-mode: standalone)').matches) {
      // User is in standalone mode (PWA is installed and running)
      // Keep them on static page - they're already in PWA mode
      console.log('Running in PWA mode');
    } else {
      // Check if user has previously used the PWA (has cached data)
      if ('caches' in window) {
        caches.keys().then(cacheNames => {
          const hasPWACache = cacheNames.some(name => 
            name.includes('static-') || name.includes('data-')
          );
          
          // Only show PWA banner if they have cached content
          if (hasPWACache) {
            const banner = document.querySelector('.pwa-banner');
            if (banner && banner.style.display === 'none') {
              banner.style.display = 'flex';
            }
          }
        });
      }
    }

    // Register service worker for all pages
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('/letters/sw.js', { scope: '/letters/' })
          .then((registration) => {
            console.log('SW registered:', registration);
          })
          .catch((error) => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>