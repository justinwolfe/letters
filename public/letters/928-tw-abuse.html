<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="9/28 (TW abuse)">
  <title>9/28 (TW abuse) - Thank You Notes</title>
  <link rel="manifest" href="/letters/manifest.json">
  <meta name="theme-color" content="#007bff">
  <link rel="apple-touch-icon" href="/letters/icon-192.png">
  <style>
    /**
 * Shared Styles for Thank You Notes
 * Used by both the static site and PWA version
 */

/* Base Reset and Layout */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: #f5f5f5;
  color: #333;
  line-height: 1.6;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

/* Loading and Error States */
.loading,
.error {
  text-align: center;
  padding: 3rem;
  font-size: 1.2rem;
}

.error {
  color: #dc3545;
}

/* Header */
.header {
  margin-bottom: 1.5rem;
  text-align: center;
}

.header h1 {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
}

.subtitle {
  font-size: 1rem;
  color: #666;
}

/* Controls */
.controls {
  margin-bottom: 2rem;
}

.search-container {
  position: relative;
  margin-bottom: 1rem;
}

.search-input {
  width: 100%;
  padding: 0.75rem 2.5rem 0.75rem 1rem;
  font-size: 1rem;
  border: 2px solid #dee2e6;
  border-radius: 8px;
  outline: none;
  transition: border-color 0.2s;
  background: white;
}

.search-input:focus {
  border-color: #007bff;
}

.clear-search {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 1.25rem;
  color: #6c757d;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  line-height: 1;
  transition: color 0.2s;
}

.clear-search:hover {
  color: #333;
}

.control-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.sort-container {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.sort-container label {
  font-size: 0.875rem;
  font-weight: 500;
  color: #666;
}

.sort-select {
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  border: 2px solid #dee2e6;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  outline: none;
  transition: border-color 0.2s;
}

.sort-select:focus {
  border-color: #007bff;
}

.result-count {
  font-size: 0.875rem;
  font-weight: 600;
  color: #495057;
  padding: 0.5rem 0.75rem;
  background: #e9ecef;
  border-radius: 6px;
  white-space: nowrap;
}

.btn-random {
  background: #28a745;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-random:hover {
  background: #218838;
  transform: translateY(-1px);
}

.btn-random:active {
  transform: translateY(0);
}

.searching,
.no-results {
  text-align: center;
  padding: 3rem 1rem;
  font-size: 1.1rem;
  color: #666;
}

/* Email/Letter List */
.list,
.letter-list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.email-card,
.letter-card {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  text-decoration: none;
  color: inherit;
  display: block;
}

.email-card:hover,
.letter-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.email-card-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: #e9ecef;
}

.email-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.email-card-content,
.letter-card {
  padding: 1.5rem;
}

.email-card h2,
.letter-card h2 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  font-weight: 600;
}

.email-description,
.letter-card p {
  color: #666;
  margin-bottom: 0.75rem;
  line-height: 1.5;
}

.email-search-snippet {
  color: #555;
  margin-bottom: 0.75rem;
  line-height: 1.5;
  font-style: italic;
}

.search-highlight {
  background: #fff3cd;
  color: #856404;
  font-weight: 700;
  padding: 0.1rem 0.2rem;
  border-radius: 3px;
  font-style: normal;
}

.email-date,
.letter-card time {
  display: block;
  font-size: 0.875rem;
  color: #888;
}

/* Email/Letter Reader */
.email-reader,
.letter-content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  margin-bottom: 2rem;
}

.email-reader {
  touch-action: pan-y pinch-zoom;
}

.reader-nav,
.navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background: #f8f9fa;
  border-bottom: 1px solid #dee2e6;
  gap: 1rem;
  flex-wrap: wrap;
}

.reader-nav-bottom {
  border-top: 1px solid #dee2e6;
  border-bottom: none;
}

.nav-buttons,
.nav-links {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

/* Buttons */
.btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  text-decoration: none;
  display: inline-block;
}

.btn:hover {
  transform: translateY(-1px);
}

.btn:active {
  transform: translateY(0);
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #5a6268;
}

.btn-nav {
  background: #007bff;
  color: white;
}

.btn-nav:hover {
  background: #0056b3;
}

.btn-back-arrow {
  background: none;
  border: none;
  color: #333;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  transition: color 0.2s, transform 0.1s;
  line-height: 1;
}

.btn-back-arrow:hover {
  color: #007bff;
  transform: translateX(-2px);
}

.btn-back-arrow:active {
  transform: translateX(0);
}

/* Email/Letter Content */
.email-content,
.letter-content {
  padding: 2rem 1.5rem;
}

.email-header,
.letter-header {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px solid #e9ecef;
}

.email-header h1,
.letter-header h1 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-header .email-date,
.letter-header time {
  font-size: 1rem;
  color: #666;
}

/* Email/Letter Body Styles */
.email-body,
.letter-body {
  font-size: 1.0625rem;
  line-height: 1.7;
  color: #333;
}

.email-body h1,
.email-body h2,
.email-body h3,
.email-body h4,
.email-body h5,
.email-body h6,
.letter-body h1,
.letter-body h2,
.letter-body h3,
.letter-body h4,
.letter-body h5,
.letter-body h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-body h1,
.letter-body h1 {
  font-size: 1.875rem;
}

.email-body h2,
.letter-body h2 {
  font-size: 1.5rem;
}

.email-body h3,
.letter-body h3 {
  font-size: 1.25rem;
}

.email-body p,
.letter-body p {
  margin-bottom: 1rem;
}

.email-body a,
.letter-body a {
  color: #007bff;
  text-decoration: none;
}

.email-body a:hover,
.letter-body a:hover {
  text-decoration: underline;
}

.email-body img,
.letter-body img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  margin: 1.5rem 0;
}

.email-body ul,
.email-body ol,
.letter-body ul,
.letter-body ol {
  margin-bottom: 1rem;
  padding-left: 2rem;
}

.email-body li,
.letter-body li {
  margin-bottom: 0.5rem;
}

.email-body blockquote,
.letter-body blockquote {
  margin: 1.5rem 0;
  padding-left: 1rem;
  border-left: 4px solid #e9ecef;
  color: #666;
  font-style: italic;
}

.email-body code,
.letter-body code {
  background: #f8f9fa;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

.email-body pre,
.letter-body pre {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 1.5rem 0;
}

.email-body pre code,
.letter-body pre code {
  background: none;
  padding: 0;
}

.email-body hr,
.letter-body hr {
  border: none;
  border-top: 2px solid #e9ecef;
  margin: 2rem 0;
}

/* PWA Banner */
.pwa-banner {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1rem;
  border-radius: 8px;
  margin: 1rem 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.pwa-banner-text {
  flex: 1;
  min-width: 200px;
}

.pwa-banner-text h3 {
  margin-bottom: 0.25rem;
  font-size: 1.1rem;
}

.pwa-banner-text p {
  font-size: 0.9rem;
  opacity: 0.9;
}

.btn-primary {
  background: #007bff;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-primary:hover {
  background: #0056b3;
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0);
}

.btn-primary:disabled {
  background: #6c757d;
  cursor: not-allowed;
  transform: none;
}

.btn-danger {
  background: #dc3545;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-danger:hover {
  background: #c82333;
  transform: translateY(-1px);
}

.btn-danger:active {
  transform: translateY(0);
}

/* Offline & PWA UI */
.offline-banner {
  background: #ff9800;
  color: white;
  padding: 0.75rem 1rem;
  text-align: center;
  border-radius: 8px;
  margin-bottom: 1rem;
  font-weight: 500;
}

.download-progress {
  background: white;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.download-progress-bar {
  height: 8px;
  background: #e9ecef;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.download-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #007bff, #0056b3);
  transition: width 0.3s ease;
}

.download-progress p {
  font-size: 0.875rem;
  color: #666;
  text-align: center;
  margin: 0;
}

.btn-offline {
  background: #6c757d;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-offline:hover {
  background: #5a6268;
  transform: translateY(-1px);
}

.btn-offline:active {
  transform: translateY(0);
}

.offline-panel {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.offline-panel h3 {
  margin-bottom: 1rem;
  color: #1a1a1a;
  font-size: 1.25rem;
}

.offline-stats {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1rem;
}

.offline-stats p {
  margin: 0.5rem 0;
  color: #495057;
  font-size: 0.9375rem;
}

.offline-actions {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.offline-note {
  font-size: 0.875rem;
  color: #666;
  line-height: 1.5;
  margin: 0;
  font-style: italic;
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 1rem 0.5rem;
  }

  .header h1 {
    font-size: 2rem;
  }

  .control-row {
    flex-direction: column;
    align-items: stretch;
  }

  .sort-container {
    width: 100%;
    justify-content: space-between;
  }

  .sort-select {
    flex: 1;
  }

  .result-count {
    text-align: center;
  }

  .btn-random {
    width: 100%;
  }

  .email-card-content {
    padding: 1rem;
  }

  .email-card h2 {
    font-size: 1.25rem;
  }

  .email-content,
  .letter-content {
    padding: 1.5rem 1rem;
  }

  .email-header h1,
  .letter-header h1 {
    font-size: 1.5rem;
  }

  .reader-nav,
  .navigation {
    flex-direction: column;
    align-items: stretch;
  }

  .nav-buttons,
  .nav-links {
    flex-direction: column;
  }

  .btn {
    width: 100%;
    text-align: center;
  }

  .btn-nav {
    font-size: 0.8125rem;
    white-space: normal;
    word-wrap: break-word;
  }

  body {
    padding: 10px;
  }

  .pwa-banner {
    flex-direction: column;
    text-align: center;
  }
}

@media (max-width: 480px) {
  .email-card-image {
    height: 150px;
  }

  .email-body,
  .letter-body {
    font-size: 1rem;
  }
}

    
    /* Static site specific adjustments */
    body {
      padding: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <div class="pwa-banner" style="display: none;">
      <div class="pwa-banner-text">
        <h3>üì± Read Offline</h3>
        <p>Install the app to read all letters offline</p>
      </div>
      <div>
        <button class="btn btn-primary" onclick="installPWA()">Install App</button>
      </div>
    </div>

    <article class="letter-content">
      <header class="letter-header">
        <h1>9/28 (TW abuse)</h1>
        <time datetime="2018-09-28T00:00:00Z">September 27, 2018</time>
      </header>

      <div class="letter-body">
        <p>&quot;<em>My mom bought me a gratitude journal recently and every night I write down a few things I‚Äôm thankful for (yes it‚Äôs corny but also kinda great). Today, I am grateful for brave and courageous women who speak their truth despite their worst fears coming to light. That is all</em>.&quot; - <a href="https://twitter.com/kennaharris/status/1045496951528206336">kenna</a></p>
<p>&quot;<em>#5at5 things I‚Äôm #grateful for</em></p>
<p><em>1. A woman spoke today</em>¬†</p>
<p><em>2. People had to listen</em></p>
<p><em>3. Wherever you stand, her voice opened conversations between myself &amp; other women with similar experiences‚Äìthere are too many.</em>¬†</p>
<p><em>4. But we have each other</em></p>
<p><em>5. You are no alone to deal with it #thankful</em>&quot; - <a href="https://twitter.com/ACEDrecover/status/1045475733034995712">ACED</a></p>
<p>&quot;<em>I am thankful that I have never had anyone call me a liar when I shared these experiences with them. But I am sick of men getting away with it.... not only have I experienced this, but many women close to me have as well...</em>&quot; - <a href="https://twitter.com/megan_jessop/status/1045439813313126400">megan jessop</a></p>
<p>&quot;<em>I left an abusive man years go, thankful to be alive. I have survival guilt because he went on to abuse more women but I knew I wouldn‚Äôt have been believed or supported</em>.&quot; - <a href="https://twitter.com/TmcuseoCuseo/status/1045494628877627394">topcat108</a></p>
<p>&quot;<em>I am just thankful that this is as far as my story goes and it pains me to think of women that have went through far worse. #whyididntreportit #butidid</em>&quot; - <a href="https://twitter.com/freeasajfer/status/1045416975978176512">jennifer m hiatt</a></p>
<p>&quot;<em>Women bury this shit because it scares us and it shames us and we make excuses for it in our minds like ‚ÄúI‚Äôm just thankful he didn‚Äôt rape me/it wasn‚Äôt worse.‚Äù If anything in all of this awfulness triggered you to remember something shitty that happened to you, I‚Äôm so sorry</em>.&quot; - <a href="https://twitter.com/carriecourogen/status/1045425455187349509">carrie courogen</a></p>
<p>&quot;<em>I don‚Äôt know how to talk about the vile things that happened today, and I‚Äôm proud of/thankful for the women who do and who will. I‚Äôm speechless and sick to my stomach</em>.&quot; - <a href="https://twitter.com/jillboard/status/1045447263265349633">jill gutowitz</a></p>
<p>&quot;<em>Dr Ford is incredibly brave, and I am so¬† thankful for what she‚Äôs doing. I can only talk about it in vague terms to an internet void, and she‚Äôs in front of the world talking about one of the worst days of her life. Believe women</em>.&quot; - <a href="https://twitter.com/douglasfirrr/status/1045441636250124293">cali hanna</a></p>
<p>&quot;i just want to hold Dr. Ford‚Äôs hand &amp; tell her how thankful i am for her speaking her truth &amp; for doing what i &amp; countless other women have been too scared to do. she deserves so much love &amp; strength from us i am in tears&quot; - <em><a href="https://twitter.com/caitidh/status/1045370920146153472">kaitlin kelly</a></em></p>
<p>&quot;<em>Women shouldn‚Äôt have to get louder for the world to listen but in these times, I‚Äôm thankful for women like Christine Ford who found the bravery to do so</em>.&quot; - <a href="https://twitter.com/WatermelonWitch/status/1045463167340621829">kasey lee</a></p>
<p>&quot;<em>Honestly thankful to be surrounded by amazing women and overall being too busy today to follow this nightmare male tears fest testimony closely. Stop crying, you shitstain. Apologize and fade away into the void where you belong. #StopKavanaugh #IStandWithChristine</em>&quot; - <a href="https://twitter.com/airhooorn/status/1045428283263918080">angelica pando</a></p>
<p>&quot;<em>I am so thankful that woman was there for me for a minute, and I hope she felt I was there for her. These kindnesses women (and other folks so often preyed upon by men) extend to each other are labor, but I am so thankful for the moments when we can carry the load together</em>.&quot; - <a href="https://twitter.com/kathycacace/status/1045535946668740608">kathy cacace</a></p>
<p>&quot;<em>I can barely fathom what Kavanaugh‚Äôs confirmation process is doing to us, collectively. I‚Äôm just so thankful to have women in my life to share in this grief with</em>.&quot; - <a href="https://twitter.com/miss__andry/status/1045441477558636544">feminist bright spot</a></p>
<p>&quot;<em>Days like today are hard, but they remind me to be thankful for the powerful women I am lucky to know. Female friendship is a beautiful thing and I am grateful that I get to experience it</em>.&quot; - <a href="https://twitter.com/claire_elise_/status/1045470958473990144">claire</a></p>
<p>&quot;<em>Radical women knocking doors last night and turning out allll the voters! Thankful for college friends turned volunteers who are out to flip the senate and #StopKavanaugh</em>&quot; - <a href="https://twitter.com/SnarrMaddy/status/1045534086599569409">maddy snarr</a></p>
<p>&quot;<em>As a future lawyer, I&#39;m thankful he may never be able to teach again.</em>¬†</p>
<p><em>He already perjured himself.</em>¬†</p>
<p><em>He claims to believe in a fair process, but not when that process is unfair to him.</em></p>
<p><em>He does not support or believe women.</em>¬†</p>
<p><em>#KavanaughConfirmationHearings</em>&quot; - <a href="https://twitter.com/JessicaKovac2/status/1045423761267331073">jessica kovac</a></p>
<p>&quot;_1/ after everything happening today, it makes me so thankful that yesterday, when filling out my absentee ballot with my mom, she commented &quot;i always like to vote for the women on the ballo_t.&quot; - <a href="https://twitter.com/eMumfy/status/1045491256128942080">emily mumford</a></p>
<p>&quot;<em>Working on practicing gratitude today so that I do not BURN THIS PLACE TO THE GROUND. Today, I&#39;m thankful for the grace under Congressional pressure that women like Anita Hill, @HillaryClinton, @CecileRichards, and Dr. Ford have so courageously modeled for us all</em>.&quot; - <a href="https://twitter.com/kwglenn/status/1045411490138927105">katie</a></p>
<p>&quot;<em>I‚Äôm so thankful that my senators are STRONG women.¬† @SenFeinstein and @KamalaHarris are enduring actual verbal abuse from a supreme court nominee to protect us and dr Ford</em>&quot; - <a href="https://twitter.com/DashleyinCali/status/1045484699873767424">ashley s</a></p>
<p>&quot;<em>today I am extra thankful for my women professors who are able to show empathy, strength and support for their students during difficult times</em>.&quot; - <a href="https://twitter.com/Linneaa24/status/1045511144826425345">linnea</a></p>
<p>&quot;<em>thankful that I got to lead a liturgy I wrote on Ruth today in worship class. strong women are so necessary, today and every day, and for this I am thankful</em>.&quot; - <a href="https://twitter.com/maggieaward/status/1045420383338483717">maggie ward</a></p>
<p>&quot;<em>So many women are having the most anxiety filled depressing day. And so much anger. Sadly I&#39;m thankful for Xanax</em>.&quot; - <a href="https://twitter.com/27leigh/status/1045488153283514368">c leigh</a></p>
<p>&quot;<em>Today I‚Äôm thankful for Xanax, my dog, coffee, the frozen pizza my boyfriend bought me, and Dateline on my DVR. Time to watch dudes that hurt women actually face consequences for their actions</em>.&quot; - <a href="https://twitter.com/WitchyNarcolep/status/1045408201791889408">catie</a></p>
<p>&quot;<em>I&#39;m at a coffee shop rn where a young child is waving and smiling at every single person she passes, bringing smiles to so many.</em>¬†<em>On days like these, where we obsessively consume and analyze the pain of women I&#39;m thankful for tiny happy moments. I hope you can find one today too</em>.&quot; - <a href="https://twitter.com/CleopatraBenos/status/1045448785122525185">cleopatra benos</a></p>
<p>&quot;<em>Today I am thankful for the bold &amp; radical &amp; loving &amp; wild community of women that I know IRL &amp; those I admire from afar. I am thankful for theory &amp; practice. I am thankful for poetry &amp; practice. I am thankful that love is a practice. I am angry &amp; thankful &amp; thankful &amp; thankful</em>.&quot; - <a href="https://twitter.com/callie_freitag/status/1045506744015699968">callie freitag</a></p>

      </div>
    </article>

    <nav class="navigation">
      <a href="/letters/" class="btn btn-secondary">home</a>
      <div class="nav-links">
        <a href="/letters/letters/930.html" class="btn btn-secondary">‚Üê 9/30</a>
        <a href="/letters/letters/927-7745.html" class="btn btn-secondary">9/27 ‚Üí</a>
      </div>
    </nav>
  
  </div>

  <script>
    // PWA installation prompt
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'flex';
      }
    });

    async function installPWA() {
      if (!deferredPrompt) {
        // If not installable, redirect to PWA
        window.location.href = '/letters/app/';
        return;
      }

      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      
      if (outcome === 'accepted') {
        console.log('PWA installed');
      }
      
      deferredPrompt = null;
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'none';
      }
    }

    function openPWA() {
      window.location.href = '/letters/app/';
    }

    // Progressive Enhancement: Check if user has PWA installed
    // If they do, redirect them to the app version for a richer experience
    if (window.matchMedia('(display-mode: standalone)').matches) {
      // User is in standalone mode (PWA is installed and running)
      // Keep them on static page - they're already in PWA mode
      console.log('Running in PWA mode');
    } else {
      // Check if user has previously used the PWA (has cached data)
      if ('caches' in window) {
        caches.keys().then(cacheNames => {
          const hasPWACache = cacheNames.some(name => 
            name.includes('static-') || name.includes('data-')
          );
          
          // Only show PWA banner if they have cached content
          if (hasPWACache) {
            const banner = document.querySelector('.pwa-banner');
            if (banner && banner.style.display === 'none') {
              banner.style.display = 'flex';
            }
          }
        });
      }
    }

    // Register service worker for all pages
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('/letters/sw.js', { scope: '/letters/' })
          .then((registration) => {
            console.log('SW registered:', registration);
          })
          .catch((error) => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>