<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="thank you notes 5/1">
  <title>thank you notes 5/1 - Thank You Notes</title>
  <link rel="manifest" href="/letters/manifest.json">
  <meta name="theme-color" content="#007bff">
  <link rel="apple-touch-icon" href="/letters/icon-192.png">
  <style>
    /**
 * Shared Styles for Thank You Notes
 * Used by both the static site and PWA version
 */

/* Base Reset and Layout */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: #f5f5f5;
  color: #333;
  line-height: 1.6;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

/* Loading and Error States */
.loading,
.error {
  text-align: center;
  padding: 3rem;
  font-size: 1.2rem;
}

.error {
  color: #dc3545;
}

/* Header */
.header {
  margin-bottom: 1.5rem;
  text-align: center;
}

.header h1 {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
}

.subtitle {
  font-size: 1rem;
  color: #666;
}

/* Controls */
.controls {
  margin-bottom: 2rem;
}

.search-container {
  position: relative;
  margin-bottom: 1rem;
}

.search-input {
  width: 100%;
  padding: 0.75rem 2.5rem 0.75rem 1rem;
  font-size: 1rem;
  border: 2px solid #dee2e6;
  border-radius: 8px;
  outline: none;
  transition: border-color 0.2s;
  background: white;
}

.search-input:focus {
  border-color: #007bff;
}

.clear-search {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 1.25rem;
  color: #6c757d;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  line-height: 1;
  transition: color 0.2s;
}

.clear-search:hover {
  color: #333;
}

.control-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.sort-container {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.sort-container label {
  font-size: 0.875rem;
  font-weight: 500;
  color: #666;
}

.sort-select {
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  border: 2px solid #dee2e6;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  outline: none;
  transition: border-color 0.2s;
}

.sort-select:focus {
  border-color: #007bff;
}

.result-count {
  font-size: 0.875rem;
  font-weight: 600;
  color: #495057;
  padding: 0.5rem 0.75rem;
  background: #e9ecef;
  border-radius: 6px;
  white-space: nowrap;
}

.btn-random {
  background: #28a745;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-random:hover {
  background: #218838;
  transform: translateY(-1px);
}

.btn-random:active {
  transform: translateY(0);
}

.searching,
.no-results {
  text-align: center;
  padding: 3rem 1rem;
  font-size: 1.1rem;
  color: #666;
}

/* Email/Letter List */
.list,
.letter-list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.email-card,
.letter-card {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  text-decoration: none;
  color: inherit;
  display: block;
}

.email-card:hover,
.letter-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.email-card-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: #e9ecef;
}

.email-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.email-card-content,
.letter-card {
  padding: 1.5rem;
}

.email-card h2,
.letter-card h2 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  font-weight: 600;
}

.email-description,
.letter-card p {
  color: #666;
  margin-bottom: 0.75rem;
  line-height: 1.5;
}

.email-search-snippet {
  color: #555;
  margin-bottom: 0.75rem;
  line-height: 1.5;
  font-style: italic;
}

.search-highlight {
  background: #fff3cd;
  color: #856404;
  font-weight: 700;
  padding: 0.1rem 0.2rem;
  border-radius: 3px;
  font-style: normal;
}

.email-date,
.letter-card time {
  display: block;
  font-size: 0.875rem;
  color: #888;
}

/* Email/Letter Reader */
.email-reader,
.letter-content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  margin-bottom: 2rem;
}

.email-reader {
  touch-action: pan-y pinch-zoom;
}

.reader-nav,
.navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background: #f8f9fa;
  border-bottom: 1px solid #dee2e6;
  gap: 1rem;
  flex-wrap: wrap;
}

.reader-nav-bottom {
  border-top: 1px solid #dee2e6;
  border-bottom: none;
}

.nav-buttons,
.nav-links {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

/* Buttons */
.btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  text-decoration: none;
  display: inline-block;
}

.btn:hover {
  transform: translateY(-1px);
}

.btn:active {
  transform: translateY(0);
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #5a6268;
}

.btn-nav {
  background: #007bff;
  color: white;
}

.btn-nav:hover {
  background: #0056b3;
}

.btn-back-arrow {
  background: none;
  border: none;
  color: #333;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  transition: color 0.2s, transform 0.1s;
  line-height: 1;
}

.btn-back-arrow:hover {
  color: #007bff;
  transform: translateX(-2px);
}

.btn-back-arrow:active {
  transform: translateX(0);
}

/* Email/Letter Content */
.email-content,
.letter-content {
  padding: 2rem 1.5rem;
}

.email-header,
.letter-header {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px solid #e9ecef;
}

.email-header h1,
.letter-header h1 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-header .email-date,
.letter-header time {
  font-size: 1rem;
  color: #666;
}

/* Email/Letter Body Styles */
.email-body,
.letter-body {
  font-size: 1.0625rem;
  line-height: 1.7;
  color: #333;
}

.email-body h1,
.email-body h2,
.email-body h3,
.email-body h4,
.email-body h5,
.email-body h6,
.letter-body h1,
.letter-body h2,
.letter-body h3,
.letter-body h4,
.letter-body h5,
.letter-body h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-body h1,
.letter-body h1 {
  font-size: 1.875rem;
}

.email-body h2,
.letter-body h2 {
  font-size: 1.5rem;
}

.email-body h3,
.letter-body h3 {
  font-size: 1.25rem;
}

.email-body p,
.letter-body p {
  margin-bottom: 1rem;
}

.email-body a,
.letter-body a {
  color: #007bff;
  text-decoration: none;
}

.email-body a:hover,
.letter-body a:hover {
  text-decoration: underline;
}

.email-body img,
.letter-body img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  margin: 1.5rem 0;
}

.email-body ul,
.email-body ol,
.letter-body ul,
.letter-body ol {
  margin-bottom: 1rem;
  padding-left: 2rem;
}

.email-body li,
.letter-body li {
  margin-bottom: 0.5rem;
}

.email-body blockquote,
.letter-body blockquote {
  margin: 1.5rem 0;
  padding-left: 1rem;
  border-left: 4px solid #e9ecef;
  color: #666;
  font-style: italic;
}

.email-body code,
.letter-body code {
  background: #f8f9fa;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

.email-body pre,
.letter-body pre {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 1.5rem 0;
}

.email-body pre code,
.letter-body pre code {
  background: none;
  padding: 0;
}

.email-body hr,
.letter-body hr {
  border: none;
  border-top: 2px solid #e9ecef;
  margin: 2rem 0;
}

/* Email Tags */
.email-tags {
  margin-top: 2rem;
  padding-top: 1.5rem;
  border-top: 2px solid #e9ecef;
}

.tags-label {
  font-size: 0.875rem;
  font-weight: 600;
  color: #666;
  margin-bottom: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.tag-badge {
  background: #e7f3ff;
  color: #0366d6;
  border: 1px solid #c8e1ff;
  padding: 0.375rem 0.75rem;
  border-radius: 16px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  text-decoration: none;
  display: inline-block;
}

.tag-badge:hover {
  background: #0366d6;
  color: white;
  border-color: #0366d6;
  transform: translateY(-1px);
}

.tag-badge:active {
  transform: translateY(0);
}

.tag-title {
  font-size: 1.75rem;
  color: #0366d6;
  margin: 0.5rem 0;
  font-weight: 600;
}

.back-link {
  background: none;
  border: none;
  color: #007bff;
  font-size: 1rem;
  cursor: pointer;
  padding: 0;
  text-decoration: none;
  font-weight: 500;
  transition: color 0.2s, transform 0.1s;
  display: inline-block;
}

.back-link:hover {
  color: #0056b3;
  text-decoration: underline;
  transform: translateX(-2px);
}

.back-link:active {
  transform: translateX(0);
}

/* PWA Banner */
.pwa-banner {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1rem;
  border-radius: 8px;
  margin: 1rem 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.pwa-banner-text {
  flex: 1;
  min-width: 200px;
}

.pwa-banner-text h3 {
  margin-bottom: 0.25rem;
  font-size: 1.1rem;
}

.pwa-banner-text p {
  font-size: 0.9rem;
  opacity: 0.9;
}

.btn-primary {
  background: #007bff;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-primary:hover {
  background: #0056b3;
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0);
}

.btn-primary:disabled {
  background: #6c757d;
  cursor: not-allowed;
  transform: none;
}

.btn-danger {
  background: #dc3545;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-danger:hover {
  background: #c82333;
  transform: translateY(-1px);
}

.btn-danger:active {
  transform: translateY(0);
}

/* Offline & PWA UI */
.offline-banner {
  background: #ff9800;
  color: white;
  padding: 0.75rem 1rem;
  text-align: center;
  border-radius: 8px;
  margin-bottom: 1rem;
  font-weight: 500;
}

.download-progress {
  background: white;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.download-progress-bar {
  height: 8px;
  background: #e9ecef;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.download-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #007bff, #0056b3);
  transition: width 0.3s ease;
}

.download-progress p {
  font-size: 0.875rem;
  color: #666;
  text-align: center;
  margin: 0;
}

.btn-offline {
  background: #6c757d;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-offline:hover {
  background: #5a6268;
  transform: translateY(-1px);
}

.btn-offline:active {
  transform: translateY(0);
}

.offline-panel {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.offline-panel h3 {
  margin-bottom: 1rem;
  color: #1a1a1a;
  font-size: 1.25rem;
}

.offline-stats {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1rem;
}

.offline-stats p {
  margin: 0.5rem 0;
  color: #495057;
  font-size: 0.9375rem;
}

.offline-actions {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.offline-note {
  font-size: 0.875rem;
  color: #666;
  line-height: 1.5;
  margin: 0;
  font-style: italic;
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 1rem 0.5rem;
  }

  .header h1 {
    font-size: 2rem;
  }

  .control-row {
    flex-direction: column;
    align-items: stretch;
  }

  .sort-container {
    width: 100%;
    justify-content: space-between;
  }

  .sort-select {
    flex: 1;
  }

  .result-count {
    text-align: center;
  }

  .btn-random {
    width: 100%;
  }

  .email-card-content {
    padding: 1rem;
  }

  .email-card h2 {
    font-size: 1.25rem;
  }

  .email-content,
  .letter-content {
    padding: 1.5rem 1rem;
  }

  .email-header h1,
  .letter-header h1 {
    font-size: 1.5rem;
  }

  .reader-nav,
  .navigation {
    flex-direction: column;
    align-items: stretch;
  }

  .nav-buttons,
  .nav-links {
    flex-direction: column;
  }

  .btn {
    width: 100%;
    text-align: center;
  }

  .btn-nav {
    font-size: 0.8125rem;
    white-space: normal;
    word-wrap: break-word;
  }

  body {
    padding: 10px;
  }

  .pwa-banner {
    flex-direction: column;
    text-align: center;
  }
}

@media (max-width: 480px) {
  .email-card-image {
    height: 150px;
  }

  .email-body,
  .letter-body {
    font-size: 1rem;
  }
}

    
    /* Static site specific adjustments */
    body {
      padding: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <div class="pwa-banner" style="display: none;">
      <div class="pwa-banner-text">
        <h3>üì± Read Offline</h3>
        <p>Install the app to read all letters offline</p>
      </div>
      <div>
        <button class="btn btn-primary" onclick="installPWA()">Install App</button>
      </div>
    </div>

    <article class="letter-content">
      <header class="letter-header">
        <h1>thank you notes 5/1</h1>
        <time datetime="2016-05-01T00:00:00Z">April 30, 2016</time>
      </header>

      <div class="letter-body">
        <p>i&#39;m thankful that when i woke up this morning, it was sunny outside and when i checked the forecast, the rain that was supposed to fall in the morning had been pushed back to the afternoon. i&#39;m thankful that now it&#39;s the afternoon and the sun is still shining and the rain has been pushed back to the evening. i&#39;m thankful that yesterday, while d was working in the study, i snuck out the backdoor in my raincoat and walked to the grocery store to get treats for dinner. i&#39;m thankful for haagen dazs salted caramel ice cream bars and thankful for the baguette which i underbaked but which was still delicious.</p>
<p>i&#39;m thankful that, even though we had really enjoyed a long lazy lie-in yesterday morning, i suggested to d that we take advantage of the change in the weather to walk to the cemetery so that she could take pictures of the peonies there if they&#39;re blooming. i&#39;m thankful that though the peonies haven&#39;t really come in yet, as we found out when we got there, it seems like it might be warm enough that next weekend they&#39;ll have bloomed. i&#39;m thankful that at the edge of the cemetery, we watched a lone deer vault over a stone wall into the thick grass. i&#39;m thankful that he didn&#39;t run off as we edged closer to him and d took pictures, but instead turned and looked at us from different positions and directions, which made d joke about him posing for us. i&#39;m thankful that we saw spindly purple flowers on our way home that reminded d of something from final fantasy. i&#39;m thankful that i always identify the gravel alley that leads down to our backyard by the bronze-looking statue of a dog in the side yard of a neighbor&#39;s house.</p>
<p>i&#39;m thankful for this description of simone de beauvoir&#39;s joie de vivre from <em><a href="http://www.amazon.com/gp/product/B00Z3E2KEC/ref=dp-kindle-redirect?ie=UTF8&btkr=1">at the existentialist cafe</a></em>:¬†</p>
<p>&quot;<em>The physical lusciousness of life was never a threat to Beauvoir: she could not get enough of it. As a child, she wanted to consume everything she saw. She would gaze greedily into the windows of sweet shops‚Äî&#39;the luminous sparkle of candied fruits, the cloudy lustre of jellies, the kaleidoscopic inflorescence of acidulated fruit-drops‚Äîgreen, red, orange, violet‚ÄîI coveted the colours themselves as much as the pleasures they promised me.&#39; She wished the whole universe could be edible, so it could be eaten as Hansel and Gretel ate from the gingerbread house. Even as an adult, she wrote, &#39;I wanted to crunch flowering almond trees, and take bites of the rainbow nougat of the sunset.&#39; Travelling to New York in 1947, she felt an urge to eat the neon signs brightly arrayed against the night sky</em>.&quot;</p>
<p>and for this passage about a private joke she and sartre shared:</p>
<p>&quot;<em>For fifty years, it was a philosophical demonstration of existentialism in practice, defined by the two principles of freedom and companionship. Lest this sound too earnest, their shared memories, observations and jokes bound them together just as in any long marriage. A typical joke began soon after they met: visiting the zoo, they watched an enormously fat and tragic-looking sea elephant which sighed and raised its eyes to heaven as if in supplication while the keeper stuffed its mouth with fish. From then on, every time Sartre looked glum, Beauvoir would remind him of the sea elephant. He would roll up his eyes and heave comical sighs, and they would both feel better</em>.&quot;</p>
<p>i&#39;m thankful that on our drive to the hardware and grocery store this morning, d pointed to the subway on woodlawn ave. which is locally famous as the subway where jared fogle lost all his weight. i&#39;m thankful that she jokingly called it &quot;<em>the subway of shame</em>&quot; and wondered about whether they had removed the plaque that for so long commemorated what he accomplished there. i&#39;m thankful for my most distinctive memory of that particular subway, which is walking there at sunset to buy dinner after a saturday afternoon of tripping on mushrooms with d, because even ¬†the simple task of microwaving and assembling the leftovers in our fridge seemed too cognitively challenging to bear. i&#39;m thankful that i think that was the evening that while coming down we watched the movie <em>adore</em>, which is on netflix and which i highly recommend if you enjoy weird movies about australian people. i&#39;m thankful that on the drive home, i played &quot;<a href="https://www.youtube.com/watch?v=cvfxKbpoxRE">she don&#39;t use jelly</a>&quot; and thankful for d&#39;s revulsion at the idea of putting vaseline on toast, as well as her enjoyment of the silliness of the final chorus rhyme being &quot;<em>tangerines</em>.&quot;</p>
<p>i&#39;m thankful that at the hardware store, i eventually found the right drill bit to replace the one i broke installing the bedroom air conditioner, as well as a matching screw and washer (i&#39;m thankful for how baffling i find all the measurements at the hardware store, how difficult it seems to find things and yet how i know that for those with the knowledge, their organization must make perfect sense). i&#39;m thankful that i had a dream last night in which i used needle nose pliers to easily gracefully remove the screen to the window in the living room where we&#39;re installing a new air conditioner. i&#39;m thankful that when i set myself to the task after lunch (homemade fried egg mcmuffins and hash browns with ugli fruit, the latter of which i&#39;m thankful i finally bought after often ogling in the produce section and which is a large and juicy and slightly tart but otherwise unremarkable in flavor and texture citrus).¬†</p>
<p>i&#39;m thankful that after several minutes of trying to budge the screen without any luck, i watched several youtube videos about how to remove window screens while gobbling handfuls of haribo gummy bears for strength. i&#39;m thankful that all the videos seemed to rely on tabs or plastic bars that our window didn&#39;t have. i&#39;m thankful that i briefly considered just cutting out the screen and leaving its frame in place, which is what i did when we first moved in and i couldn&#39;t pop out the screen in the bedroom window. thankful that finally on googling &quot;<em>remove window screen no tabs</em>&quot; i found a forum discussion in which someone mentioned just jamming a butter knife under the bottom lip of the screen and prying it loose, which i did and which worked perfectly. i&#39;m thankful, the part i was dreading done, that i then opened the air conditioner box to finish assembly for installation, only to find we&#39;d been sent a different (shittier) air conditioner than the one we ordered. i&#39;m thankful that i pondered just installing it anyway because the thought of having to repackage and ship back the air conditioner is daunting, but that instead i emailed the seller and will think about this further.</p>
<p>i&#39;m thankful to have learned that my favorite actor <a href="http://www.hollywoodreporter.com/live-feed/elisabeth-moss-star-hulu-straight-888858">elisabeth moss is going to star</a> in an adaptation of <em>the handmaid&#39;s tale</em>. i&#39;m thankful for <em>the handmaid&#39;s tale</em>, which i read way too late a couple of years ago after liking some other margaret atwood and not liking some other margaret atwood and which is, i think, a perfect book. i&#39;m thankful, in other novel adaptations, for <a href="https://www.instagram.com/legokarlove/">this instagram devoted to reproducing scenes from knausgaard in lego</a>. i&#39;m thankful that for what feels like months, heid montag has been snapchatting the cover of a book called <em>believing god</em> and captioning it &quot;<em>need to read more of my book</em>&quot; or &quot;<em>i have got to finish this book</em>&quot; and how every time an image of the book comes up in her snaps, i think, &quot;<em>oh, she&#39;s actually done</em>,&quot; and then realize that she&#39;s still reading it. i&#39;m thankful that <a href="https://twitter.com/katienotopoulos/status/726237016384495616">katie notopoulos also enjoys</a> watching spencer pratt make and buy espresso every day. i&#39;m thankful, as someone who has not had coffee for years, for how invested i feel in whether he will pour or be poured a perfect 32 gram shot and for how happy it makes him when it happens.¬†</p>
<p>i&#39;m thankful that after several evenings of trying to defeat a giant killer robot in <em>metal gear solid v</em> and being killed by it, i finally managed to defeat it by cowering behind a rock to avoid its one shot kill laser cannon. i&#39;m thankful for <em>spirited away</em>, which is d&#39;s favorite miyazaki and which i fell asleep when trying to watch it the first time but which we watched all of on friday and was amazing. i&#39;m thankful for the devotion to both representing and reinventing nature that drives ghibli movies.¬†i&#39;m thankful for <a href="http://helloglow.co/8-sinus-infection-remedies/">this tea</a> (item 3), which c recommended for allergies and which is very tasty. i&#39;m thankful that i did yoga for an hour instead of a half hour yesterday and thankful for the way that at the end when you lie on the back and lower your knees to your sides for a spinal twist, i didn&#39;t feel a twinge of a pull in my back like i normally do. i&#39;m thankful for times when doing more work pays off with tangible results. i&#39;m thankful for <a href="https://danaanm.tumblr.com/">dana&#39;s thank you notes</a>, which i look forward to reading every morning. i&#39;m thankful for <em>aquemini</em>.</p>
<p>i&#39;m thankful that after i send these notes to you, i&#39;m going to go for a long bike ride in the sunshine. i&#39;m thankful for the extra benadryl i have taken to hopefully protect me from what i will inhale as i pedal through the springtime. i&#39;m thankful for drivers who yield at the intersections of the road with the walk/bike path, not only because that&#39;s the law but also because it&#39;s nice. i&#39;m thankful for the grace of a moving truck which came swinging around a tight turn when i was riding down fourth the other day and how i drifted to the far side of the lane to give him room but didn&#39;t even need to. i&#39;m thankful that now it&#39;s warm, lots of drivers have their windows open, which i like because when they wave me through intersections ahead of them on my bike, i can say &quot;<em>thank you</em>&quot; and know they hear me.</p>

      </div>

      
    <footer class="email-tags">
      <div class="tags-label">Tags:</div>
      <div class="tags-list">
        <a href="/letters/?tag=cooking" class="tag-badge">#cooking</a>
        <a href="/letters/?tag=everyday-life" class="tag-badge">#everyday life</a>
        <a href="/letters/?tag=gratitude" class="tag-badge">#gratitude</a>
        <a href="/letters/?tag=home-improvement" class="tag-badge">#home improvement</a>
        <a href="/letters/?tag=literature" class="tag-badge">#literature</a>
        <a href="/letters/?tag=nature-appreciation" class="tag-badge">#nature appreciation</a>
        <a href="/letters/?tag=personal-anecdotes" class="tag-badge">#personal anecdotes</a>
        <a href="/letters/?tag=philosophy" class="tag-badge">#philosophy</a>
      </div>
    </footer>
  
    </article>

    <nav class="navigation">
      <a href="/letters/" class="btn btn-secondary">home</a>
      <div class="nav-links">
        <a href="/letters/letters/thank-you-notes-52.html" class="btn btn-secondary">‚Üê thank you notes 5/2</a>
        <a href="/letters/letters/thank-you-noteskflo3.html" class="btn btn-secondary">thank you notes(kflo)(3) ‚Üí</a>
      </div>
    </nav>
  
  </div>

  <script>
    // PWA installation prompt
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'flex';
      }
    });

    async function installPWA() {
      if (!deferredPrompt) {
        // If not installable, redirect to PWA
        window.location.href = '/letters/app/';
        return;
      }

      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      
      if (outcome === 'accepted') {
        console.log('PWA installed');
      }
      
      deferredPrompt = null;
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'none';
      }
    }

    function openPWA() {
      // Mark PWA preference and redirect
      localStorage.setItem('pwa-preferred', 'true');

      // Extract the letter slug from current URL if on a letter page
      const path = window.location.pathname;
      const match = path.match(//letters/([^/]+).html$/);

      if (match) {
        const slug = match[1];
        window.location.href = '/letters/app/?letter=' + encodeURIComponent(slug);
      } else {
        window.location.href = '/letters/app/';
      }
    }

    // PWA Auto-redirect: Check if user prefers PWA or has ?pwa=1 parameter
    (function() {
      const params = new URLSearchParams(window.location.search);
      const preferPWA = params.get('pwa') === '1';
      const hasPWAPreference = localStorage.getItem('pwa-preferred') === 'true';

      // Don't redirect if already in standalone mode (PWA is installed and running)
      const isStandalone = window.matchMedia('(display-mode: standalone)').matches;

      if ((preferPWA || hasPWAPreference) && !isStandalone) {
        // Redirect to PWA with letter context
        const path = window.location.pathname;
        const match = path.match(//letters/([^/]+).html$/);

        if (match) {
          const slug = match[1];
          window.location.href = '/letters/app/?letter=' + encodeURIComponent(slug);
        } else {
          window.location.href = '/letters/app/';
        }
        return; // Stop further execution
      }
    })();

    // Progressive Enhancement: Check if user has PWA installed
    // If they do, show banner suggesting to use the app
    if (window.matchMedia('(display-mode: standalone)').matches) {
      // User is in standalone mode (PWA is installed and running)
      // Keep them on static page - they're already in PWA mode
      console.log('Running in PWA mode');
    } else {
      // Check if user has previously used the PWA (has cached data)
      if ('caches' in window) {
        caches.keys().then(cacheNames => {
          const hasPWACache = cacheNames.some(name =>
            name.includes('static-') || name.includes('data-')
          );

          // Only show PWA banner if they have cached content
          if (hasPWACache) {
            const banner = document.querySelector('.pwa-banner');
            if (banner && banner.style.display === 'none') {
              banner.style.display = 'flex';
            }
          }
        });
      }
    }

    // Register service worker for all pages
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('/letters/sw.js', { scope: '/letters/' })
          .then((registration) => {
            console.log('SW registered:', registration);
          })
          .catch((error) => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>