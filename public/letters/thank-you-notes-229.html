<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="thank you notes 2/29">
  <title>thank you notes 2/29 - Thank You Notes</title>
  <link rel="manifest" href="/letters/manifest.json">
  <meta name="theme-color" content="#007bff">
  <link rel="apple-touch-icon" href="/letters/icon-192.png">
  <style>
    /**
 * Shared Styles for Thank You Notes
 * Used by both the static site and PWA version
 */

/* Base Reset and Layout */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: #f5f5f5;
  color: #333;
  line-height: 1.6;
}

.container {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

/* Loading and Error States */
.loading,
.error {
  text-align: center;
  padding: 3rem;
  font-size: 1.2rem;
}

.error {
  color: #dc3545;
}

/* Header */
.header {
  margin-bottom: 1.5rem;
  text-align: center;
}

.header h1 {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
}

.subtitle {
  font-size: 1rem;
  color: #666;
}

/* Controls */
.controls {
  margin-bottom: 2rem;
}

.search-container {
  position: relative;
  margin-bottom: 1rem;
}

.search-input {
  width: 100%;
  padding: 0.75rem 2.5rem 0.75rem 1rem;
  font-size: 1rem;
  border: 2px solid #dee2e6;
  border-radius: 8px;
  outline: none;
  transition: border-color 0.2s;
  background: white;
}

.search-input:focus {
  border-color: #007bff;
}

.clear-search {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  font-size: 1.25rem;
  color: #6c757d;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  line-height: 1;
  transition: color 0.2s;
}

.clear-search:hover {
  color: #333;
}

.control-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.sort-container {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.sort-container label {
  font-size: 0.875rem;
  font-weight: 500;
  color: #666;
}

.sort-select {
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  border: 2px solid #dee2e6;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  outline: none;
  transition: border-color 0.2s;
}

.sort-select:focus {
  border-color: #007bff;
}

.result-count {
  font-size: 0.875rem;
  font-weight: 600;
  color: #495057;
  padding: 0.5rem 0.75rem;
  background: #e9ecef;
  border-radius: 6px;
  white-space: nowrap;
}

.btn-random {
  background: #28a745;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-random:hover {
  background: #218838;
  transform: translateY(-1px);
}

.btn-random:active {
  transform: translateY(0);
}

.searching,
.no-results {
  text-align: center;
  padding: 3rem 1rem;
  font-size: 1.1rem;
  color: #666;
}

/* Email/Letter List */
.list,
.letter-list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.email-card,
.letter-card {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  text-decoration: none;
  color: inherit;
  display: block;
}

.email-card:hover,
.letter-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.email-card-image {
  width: 100%;
  height: 200px;
  overflow: hidden;
  background: #e9ecef;
}

.email-card-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.email-card-content,
.letter-card {
  padding: 1.5rem;
}

.email-card h2,
.letter-card h2 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  font-weight: 600;
}

.email-description,
.letter-card p {
  color: #666;
  margin-bottom: 0.75rem;
  line-height: 1.5;
}

.email-search-snippet {
  color: #555;
  margin-bottom: 0.75rem;
  line-height: 1.5;
  font-style: italic;
}

.search-highlight {
  background: #fff3cd;
  color: #856404;
  font-weight: 700;
  padding: 0.1rem 0.2rem;
  border-radius: 3px;
  font-style: normal;
}

.email-date,
.letter-card time {
  display: block;
  font-size: 0.875rem;
  color: #888;
}

/* Email/Letter Reader */
.email-reader,
.letter-content {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  margin-bottom: 2rem;
}

.email-reader {
  touch-action: pan-y pinch-zoom;
}

.reader-nav,
.navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  background: #f8f9fa;
  border-bottom: 1px solid #dee2e6;
  gap: 1rem;
  flex-wrap: wrap;
}

.reader-nav-bottom {
  border-top: 1px solid #dee2e6;
  border-bottom: none;
}

.nav-buttons,
.nav-links {
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

/* Buttons */
.btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  text-decoration: none;
  display: inline-block;
}

.btn:hover {
  transform: translateY(-1px);
}

.btn:active {
  transform: translateY(0);
}

.btn-secondary {
  background: #6c757d;
  color: white;
}

.btn-secondary:hover {
  background: #5a6268;
}

.btn-nav {
  background: #007bff;
  color: white;
}

.btn-nav:hover {
  background: #0056b3;
}

.btn-back-arrow {
  background: none;
  border: none;
  color: #333;
  cursor: pointer;
  padding: 0.25rem 0.5rem;
  transition: color 0.2s, transform 0.1s;
  line-height: 1;
}

.btn-back-arrow:hover {
  color: #007bff;
  transform: translateX(-2px);
}

.btn-back-arrow:active {
  transform: translateX(0);
}

/* Email/Letter Content */
.email-content,
.letter-content {
  padding: 2rem 1.5rem;
}

.email-header,
.letter-header {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 2px solid #e9ecef;
}

.email-header h1,
.letter-header h1 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-header .email-date,
.letter-header time {
  font-size: 1rem;
  color: #666;
}

/* Email/Letter Body Styles */
.email-body,
.letter-body {
  font-size: 1.0625rem;
  line-height: 1.7;
  color: #333;
}

.email-body h1,
.email-body h2,
.email-body h3,
.email-body h4,
.email-body h5,
.email-body h6,
.letter-body h1,
.letter-body h2,
.letter-body h3,
.letter-body h4,
.letter-body h5,
.letter-body h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
  color: #1a1a1a;
  line-height: 1.3;
}

.email-body h1,
.letter-body h1 {
  font-size: 1.875rem;
}

.email-body h2,
.letter-body h2 {
  font-size: 1.5rem;
}

.email-body h3,
.letter-body h3 {
  font-size: 1.25rem;
}

.email-body p,
.letter-body p {
  margin-bottom: 1rem;
}

.email-body a,
.letter-body a {
  color: #007bff;
  text-decoration: none;
}

.email-body a:hover,
.letter-body a:hover {
  text-decoration: underline;
}

.email-body img,
.letter-body img {
  max-width: 100%;
  height: auto;
  border-radius: 4px;
  margin: 1.5rem 0;
}

.email-body ul,
.email-body ol,
.letter-body ul,
.letter-body ol {
  margin-bottom: 1rem;
  padding-left: 2rem;
}

.email-body li,
.letter-body li {
  margin-bottom: 0.5rem;
}

.email-body blockquote,
.letter-body blockquote {
  margin: 1.5rem 0;
  padding-left: 1rem;
  border-left: 4px solid #e9ecef;
  color: #666;
  font-style: italic;
}

.email-body code,
.letter-body code {
  background: #f8f9fa;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

.email-body pre,
.letter-body pre {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 4px;
  overflow-x: auto;
  margin: 1.5rem 0;
}

.email-body pre code,
.letter-body pre code {
  background: none;
  padding: 0;
}

.email-body hr,
.letter-body hr {
  border: none;
  border-top: 2px solid #e9ecef;
  margin: 2rem 0;
}

/* Email Tags */
.email-tags {
  margin-top: 2rem;
  padding-top: 1.5rem;
  border-top: 2px solid #e9ecef;
}

.tags-label {
  font-size: 0.875rem;
  font-weight: 600;
  color: #666;
  margin-bottom: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.tag-badge {
  background: #e7f3ff;
  color: #0366d6;
  border: 1px solid #c8e1ff;
  padding: 0.375rem 0.75rem;
  border-radius: 16px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  text-decoration: none;
  display: inline-block;
}

.tag-badge:hover {
  background: #0366d6;
  color: white;
  border-color: #0366d6;
  transform: translateY(-1px);
}

.tag-badge:active {
  transform: translateY(0);
}

.tag-title {
  font-size: 1.75rem;
  color: #0366d6;
  margin: 0.5rem 0;
  font-weight: 600;
}

.back-link {
  background: none;
  border: none;
  color: #007bff;
  font-size: 1rem;
  cursor: pointer;
  padding: 0;
  text-decoration: none;
  font-weight: 500;
  transition: color 0.2s, transform 0.1s;
  display: inline-block;
}

.back-link:hover {
  color: #0056b3;
  text-decoration: underline;
  transform: translateX(-2px);
}

.back-link:active {
  transform: translateX(0);
}

/* PWA Banner */
.pwa-banner {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 1rem;
  border-radius: 8px;
  margin: 1rem 0 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.pwa-banner-text {
  flex: 1;
  min-width: 200px;
}

.pwa-banner-text h3 {
  margin-bottom: 0.25rem;
  font-size: 1.1rem;
}

.pwa-banner-text p {
  font-size: 0.9rem;
  opacity: 0.9;
}

.btn-primary {
  background: #007bff;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-primary:hover {
  background: #0056b3;
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0);
}

.btn-primary:disabled {
  background: #6c757d;
  cursor: not-allowed;
  transform: none;
}

.btn-danger {
  background: #dc3545;
  color: white;
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: 6px;
  font-size: 0.9375rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.btn-danger:hover {
  background: #c82333;
  transform: translateY(-1px);
}

.btn-danger:active {
  transform: translateY(0);
}

/* Offline & PWA UI */
.offline-banner {
  background: #ff9800;
  color: white;
  padding: 0.75rem 1rem;
  text-align: center;
  border-radius: 8px;
  margin-bottom: 1rem;
  font-weight: 500;
}

.download-progress {
  background: white;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.download-progress-bar {
  height: 8px;
  background: #e9ecef;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.download-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #007bff, #0056b3);
  transition: width 0.3s ease;
}

.download-progress p {
  font-size: 0.875rem;
  color: #666;
  text-align: center;
  margin: 0;
}

.btn-offline {
  background: #6c757d;
  color: white;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
  white-space: nowrap;
}

.btn-offline:hover {
  background: #5a6268;
  transform: translateY(-1px);
}

.btn-offline:active {
  transform: translateY(0);
}

.offline-panel {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.offline-panel h3 {
  margin-bottom: 1rem;
  color: #1a1a1a;
  font-size: 1.25rem;
}

.offline-stats {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1rem;
}

.offline-stats p {
  margin: 0.5rem 0;
  color: #495057;
  font-size: 0.9375rem;
}

.offline-actions {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
}

.offline-note {
  font-size: 0.875rem;
  color: #666;
  line-height: 1.5;
  margin: 0;
  font-style: italic;
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 1rem 0.5rem;
  }

  .header h1 {
    font-size: 2rem;
  }

  .control-row {
    flex-direction: column;
    align-items: stretch;
  }

  .sort-container {
    width: 100%;
    justify-content: space-between;
  }

  .sort-select {
    flex: 1;
  }

  .result-count {
    text-align: center;
  }

  .btn-random {
    width: 100%;
  }

  .email-card-content {
    padding: 1rem;
  }

  .email-card h2 {
    font-size: 1.25rem;
  }

  .email-content,
  .letter-content {
    padding: 1.5rem 1rem;
  }

  .email-header h1,
  .letter-header h1 {
    font-size: 1.5rem;
  }

  .reader-nav,
  .navigation {
    flex-direction: column;
    align-items: stretch;
  }

  .nav-buttons,
  .nav-links {
    flex-direction: column;
  }

  .btn {
    width: 100%;
    text-align: center;
  }

  .btn-nav {
    font-size: 0.8125rem;
    white-space: normal;
    word-wrap: break-word;
  }

  body {
    padding: 10px;
  }

  .pwa-banner {
    flex-direction: column;
    text-align: center;
  }
}

@media (max-width: 480px) {
  .email-card-image {
    height: 150px;
  }

  .email-body,
  .letter-body {
    font-size: 1rem;
  }
}

    
    /* Static site specific adjustments */
    body {
      padding: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    
    <div class="pwa-banner" style="display: none;">
      <div class="pwa-banner-text">
        <h3>📱 Read Offline</h3>
        <p>Install the app to read all letters offline</p>
      </div>
      <div>
        <button class="btn btn-primary" onclick="installPWA()">Install App</button>
      </div>
    </div>

    <article class="letter-content">
      <header class="letter-header">
        <h1>thank you notes 2/29</h1>
        <time datetime="2016-02-29T00:00:00Z">February 28, 2016</time>
      </header>

      <div class="letter-body">
        <p>i&#39;m thankful that the plastic grocery bags d and i loaded with library books that needed to be returned seemed like they were going to break under the weight of the literature for most of the trip but lasted just as long as we needed them to, collapsing and tearing and dumping what we&#39;d read on the sidewalk a few feet away from the book return chute. i&#39;m thankful for the scaffolding around the building that&#39;s being erected across the street from the library (i&#39;m always thankful for scaffolding, which encourages fantasies of climbing and frames the building inside it like an artwork). i&#39;m thankful when the walls are up on a construction site but it&#39;s not enclosed, so you can see inside and wonder about what&#39;s to come. i&#39;m thankful that the stacks of bags of ice melt outside the grocery store have been replaced with stacks of bags of mulch blend, which means people are already thinking about spring. i&#39;m thankful, while washing a lot of dishes and cleaning the kitchen, to have watched my neighbor and his dad (who was wearing very country overalls) breaking and tilling a square of soil in their backyard, for a garden, i assume. i&#39;m thankful for the striped hammock they set up beside the square they tilled for a siesta. i&#39;m thankful that i washed and lubed the chain of my bike and the gears, even though it didn&#39;t fix the clicking sound i&#39;m hearing when i&#39;m pedaling hard and so that must be something else. i&#39;m thankful after a long silence to hear birds tweeting in the mornings when i wake up. i&#39;m thankful for the blue jay we saw perched in the tree by the driveway.</p>
<p>i&#39;m thankful for the long run i had on sunday afternoon, where i tried every water fountain on the trail (there are 3 along the 9 or so miles). i&#39;m thankful that none of them are turned on yet but thankful to check every one i pass every time i pass it, knowing that at some point not too long from now, the button will be pushable and i&#39;ll hear the sound of underground movement and cold clean water will gush out of the faucet. i&#39;m thankful for the little boy i passed who was wearing a bike helmet with a tiny shark fin on top. i&#39;m thankful for the assignment i gave myself to try to smile to every person i passed on the trail, even though sometimes i didn&#39;t feel like smiling and even though sometimes it seemed to weird people out that i was smiling at them. i&#39;m thankful when i passed the improvised sunday parking lot for the cool young megachurch, a nice woman waiting to cross the street smiled warmly at me. i&#39;m thankful for the part of trail later on where you are surrounded on both sides by high walls of limestone and it feels like you&#39;re running through the drained bed of what was once a strong river. i&#39;m thankful for the part not soon after that, for the real live creek off to the right of the trail, for the gradations of color in it, the way that the darker muddier blue at the edges of the water became a light aquamarine in the center (i&#39;m thankful for how <a href="http://www.jewelsforme.com/images/articles/aquamarine-pegmatite-mineral.jpg">this crystal</a> is like a frozen chunk of what i saw). i&#39;m thankful that it was the longest, best run i&#39;d had in a while and it felt really, really good (at least until the last mile, when i suddenly had sharp intestinal cramps and had to run off into the brush at the side of the track and remember why <a href="http://news.bbc.co.uk/sport2/hi/athletics/4454315.stm">paula radcliffe is a hero</a>). i&#39;m thankful that i slept poorly last night, as i often do after a long run for reasons i and my doctor and <a href="http://ask.metafilter.com/285400/Strange-symptoms-after-longer-runs">the internet</a> can never totally figure out, but thankful that i made sure to get enough protein and replenish my electrolytes, which kept me from feeling really bad.</p>
<p>i&#39;m thankful for the all you can eat sushi restaurant we ate at on saturday. i&#39;m thankful that it replaced another sushi restaurant which was named after a gilbert and sullivan opera and was gaudily decorated and overpriced and not good at all. i&#39;m thankful that the sushi (and etc.) at the all you can eat sushi restaurant was made to order (and that you ordered over an ipad) rather than it being laid out buffet style. i&#39;m thankful that one of the menu categories was hilariously titled &quot;asian fashion food,&quot; which we think was supposed to be &quot;asian fusion food.&quot; i&#39;m thankful that though none of the sushi was great, almost all of the fish for the ngiri besides the mackerel being pretty bland and tasteless, it was still an enjoyable experience. i&#39;m thankful that i never expect exceptional sushi in the midwest, just to be able to scratch the itch of a craving, and thankful that this did that. i&#39;m thankful for my neighborhood sushi restaurant in busan, where i ate the best sushi i have ever had and may ever have in my life on the reg for pocket change, for the kind couple who owned and ran the restaurant and how my interactions with them were some of the warmest and nicest that i had with adults there—i&#39;m thankful for the feeling of being a regular. i&#39;m thankful for the non-sushi dishes we had, many of which were better than the sushi, including excellent seaweed salad and cold spicy chopped pig intestines and grilled mackerel and red bean ice cream, which i said i liked even though i don&#39;t normally like red bean desserts and d said didn&#39;t really taste like red bean and i said &quot;<em>exactly!</em>&quot; i&#39;m thankful that i got full enough at the buffet that even with a long walk after, i was still so full by dinner that i just had some banana bread and was very satisfied with that.</p>
<p>i&#39;m thankful that d is getting to have the <a href="http://www.amazon.com/House-Foods-Vermont-Curry-8-1-Ounce/dp/B003V3E6XU">brown curry</a> she loves and i can&#39;t stand for lunch this week so that i don&#39;t have to eat or smell it. i&#39;m thankful that pork chops were on clearance at the grocery store and so we&#39;re having pork chops for dinner this week (and maybe that venison i mentioned, if the professor brings it). i&#39;m thankful that even though i accidentally over-roasted the okra to go with our pork chops and baked potatoes last night, it was still mostly edible. i&#39;m thankful that even though i accidentally cut a potato almost in half when i was stabbing it with a fork to make steam holes before baking and i was worried this might cause problems, it was still just as tasty. i&#39;m thankful for the blood orange-flavored san pellegrino, which i mixed with plain seltzer and bitters in a glass with a large novelty ice cube for my sobriety cocktail (i&#39;m thankful that i still haven&#39;t gone back to drinking). </p>
<p>i&#39;m thankful for the novel i just finished, <a href="http://www.amazon.com/gp/product/B00486U37C/ref=dp-kindle-redirect?ie=UTF8&btkr=1">heidegger&#39;s glasses</a> by thaisa frank, which is about a secret underground town full of scribes recruited to respond to letters written to people killed in concentration camps because of hitler&#39;s occult fear that to leave the letters unanswered would doom the reich. i&#39;m thankful for n.k. jemisin&#39;s <a href="http://www.nytimes.com/2016/02/28/books/review/on-the-edge-of-gone-by-corinne-duyvis-and-more.html">monthly column</a> on the latest in science fiction and fantasy, as well as io9&#39;s <a href="http://io9.gizmodo.com/tag/bookshelf-injection">bookshelf injection posts</a>, which are what i&#39;ll probably re-scan to find my next book. i&#39;m thankful i&#39;m using my tax return to buy a fancy new ereader and a meditation cushion. i&#39;m thankful that emma jane unsworth&#39;s <em>animals</em>, which i love and is like a lena dunham production of <em>withnail and i</em>, is <a href="http://emilybooks.com/">this month&#39;s emily book</a> </p>
<p>i&#39;m thankful for this james meek lecture i listened to about &quot;<a href="http://www.lrb.co.uk/v38/n04/james-meek/robin-hood-in-a-time-of-austerity">robin hood in the time of austerity</a>.&quot; i&#39;m thankful that i reset the smc on my laptop, which made the fan stop running loudly and constantly and which i should&#39;ve done like a week ago. i&#39;m thankful for <a href="https://www.facebook.com/Mezesmanna/videos/436904323174437/">this cookie decorating video</a> that d sent me, which is even better than the cookie decorating video i sent you last week (i&#39;m thankful for the concept of frosting embroidery). i&#39;m thankful for d&#39;s wonder woman underwear. i&#39;m thankful for the conversation d and i had in bed about how you have sex with a mermaid and the <a href="http://io9.gizmodo.com/5802301/how-to-have-sex-with-a-mermaid">subsequent googling</a>. i&#39;m thankful i cleaned my bathroom, which i hadn&#39;t done in a while and took no time at all and made the space so much nicer. i&#39;m thankful for <a href="https://twitter.com/jamieabrew/status/704124030819782657">this web symposium</a> on the semiotics of a weird sign for a falafel sandwich in chicago. i&#39;m thankful for <a href="https://twitter.com/priya_ebooks/status/704234750391681024">this amazing/horrible &quot;netflix and chill&quot; story</a>. </p>
<p>i&#39;m thankful that when a staff member from another office came to return the mailroom key she had borrowed from me, i pulled out one of my headphones to greet her and she said &quot;<em>happy weekday</em>!&quot; and i laughed and rolled my eyes and said &quot;<em>yeah, happy weekday</em>!&quot; and whooped ironically. i&#39;m thankful for how she looked confused and i pulled out my other headphone and understood that she had said, in a genuine congratulatory spirit, &quot;<em>happy leap day</em>!.&quot; i&#39;m thankful for the moment of sympathy we shared for children born on leap days. i&#39;m thankful to say happy leap day to you and to know that you will understand me.</p>

      </div>

      
    <footer class="email-tags">
      <div class="tags-label">Tags:</div>
      <div class="tags-list">
        <a href="/letters/?tag=community-interactions" class="tag-badge">#community interactions</a>
        <a href="/letters/?tag=everyday-life" class="tag-badge">#everyday life</a>
        <a href="/letters/?tag=gardening" class="tag-badge">#gardening</a>
        <a href="/letters/?tag=gratitude" class="tag-badge">#gratitude</a>
        <a href="/letters/?tag=home-cooking" class="tag-badge">#home cooking</a>
        <a href="/letters/?tag=literature" class="tag-badge">#literature</a>
        <a href="/letters/?tag=running" class="tag-badge">#running</a>
        <a href="/letters/?tag=sushi-dining" class="tag-badge">#sushi dining</a>
      </div>
    </footer>
  
    </article>

    <nav class="navigation">
      <a href="/letters/" class="btn btn-secondary">home</a>
      <div class="nav-links">
        <a href="/letters/letters/thank-you-notes-31.html" class="btn btn-secondary">← thank you notes 3/1</a>
        <a href="/letters/letters/thank-you-notes-fsa2.html" class="btn btn-secondary">thank you notes (fsa)(2) →</a>
      </div>
    </nav>
  
  </div>

  <script>
    // PWA installation prompt
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'flex';
      }
    });

    async function installPWA() {
      if (!deferredPrompt) {
        // If not installable, redirect to PWA
        window.location.href = '/letters/app/';
        return;
      }

      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      
      if (outcome === 'accepted') {
        console.log('PWA installed');
      }
      
      deferredPrompt = null;
      const banner = document.querySelector('.pwa-banner');
      if (banner) {
        banner.style.display = 'none';
      }
    }

    function openPWA() {
      // Mark PWA preference and redirect
      localStorage.setItem('pwa-preferred', 'true');

      // Extract the letter slug from current URL if on a letter page
      const path = window.location.pathname;
      const match = path.match(//letters/([^/]+).html$/);

      if (match) {
        const slug = match[1];
        window.location.href = '/letters/app/?letter=' + encodeURIComponent(slug);
      } else {
        window.location.href = '/letters/app/';
      }
    }

    // PWA Auto-redirect: Check if user prefers PWA or has ?pwa=1 parameter
    (function() {
      const params = new URLSearchParams(window.location.search);
      const preferPWA = params.get('pwa') === '1';
      const hasPWAPreference = localStorage.getItem('pwa-preferred') === 'true';

      // Don't redirect if already in standalone mode (PWA is installed and running)
      const isStandalone = window.matchMedia('(display-mode: standalone)').matches;

      if ((preferPWA || hasPWAPreference) && !isStandalone) {
        // Redirect to PWA with letter context
        const path = window.location.pathname;
        const match = path.match(//letters/([^/]+).html$/);

        if (match) {
          const slug = match[1];
          window.location.href = '/letters/app/?letter=' + encodeURIComponent(slug);
        } else {
          window.location.href = '/letters/app/';
        }
        return; // Stop further execution
      }
    })();

    // Progressive Enhancement: Check if user has PWA installed
    // If they do, show banner suggesting to use the app
    if (window.matchMedia('(display-mode: standalone)').matches) {
      // User is in standalone mode (PWA is installed and running)
      // Keep them on static page - they're already in PWA mode
      console.log('Running in PWA mode');
    } else {
      // Check if user has previously used the PWA (has cached data)
      if ('caches' in window) {
        caches.keys().then(cacheNames => {
          const hasPWACache = cacheNames.some(name =>
            name.includes('static-') || name.includes('data-')
          );

          // Only show PWA banner if they have cached content
          if (hasPWACache) {
            const banner = document.querySelector('.pwa-banner');
            if (banner && banner.style.display === 'none') {
              banner.style.display = 'flex';
            }
          }
        });
      }
    }

    // Register service worker for all pages
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('/letters/sw.js', { scope: '/letters/' })
          .then((registration) => {
            console.log('SW registered:', registration);
          })
          .catch((error) => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>